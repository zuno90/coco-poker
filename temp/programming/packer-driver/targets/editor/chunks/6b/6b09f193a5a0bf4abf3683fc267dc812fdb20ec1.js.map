{"version":3,"sources":["file:///Users/zuno/Desktop/ZUNO/coco-poker/extensions/colyseus-sdk/runtime/colyseus.js"],"names":["_cjsLoader","__cjsMetaURL","url","define","exports","require","module","__filename","__dirname","global","factory","amd","globalThis","self","Colyseus","ArrayBuffer","isView","a","buffer","window","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","__extends","TypeError","String","__","constructor","create","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__generator","body","_","label","sent","t","trys","ops","f","y","g","verb","Symbol","iterator","n","v","op","pop","length","push","src","tar","headers","statusMessage","statusText","statusCode","status","data","response","send","method","uri","opts","res","rej","req","XMLHttpRequest","k","tmp","arr","str","timeout","ontimeout","onerror","err","type","open","href","onload","getAllResponseHeaders","trim","split","shift","toLowerCase","join","indexOf","JSON","parse","reviver","FormData","stringify","withCredentials","setRequestHeader","get","bind","post","patch","del","put","del_1","get_1","patch_1","post_1","put_1","send_1","xhr","http","freeze","assign","ServerError","_super","code","message","_this","name","Error","Decoder","offset","_offset","_buffer","_view","DataView","byteOffset","byteLength","utf8Read$1","view","string","chr","i","end","byte","getUint8","fromCharCode","toString","_array","_parse","_map","key","_str","_bin","slice","prefix","hi","lo","getUint16","getUint32","getInt8","getFloat32","getFloat64","Math","pow","getInt16","getInt32","Date","decode","decoder","utf8Write","c","l","charCodeAt","setUint8","utf8Length$1","_encode","bytes","defers","size","_length","floor","isFinite","_float","isArray","time","getTime","toJSON","keys","allKeys","encode","buf","deferIndex","deferWritten","nextOffset","defer","deferLength","bin","Uint8Array","j","undefined","setFloat64","browser","WebSocket","WebSocketTransport","events","ws","connect","protocols","binaryType","onopen","onmessage","onclose","close","reason","Connection","transport","serializers","registerSerializer","id","serializer","getSerializer","Protocol","ErrorCode","utf8Read","utf8Length","createNanoEvents","emit","event","args","forEach","on","cb","filter","EventEmitter","handlers","register","once","invoke","_i","arguments","handler","invokeAsync","all","map","remove","index","clear","createSignal","emitter","callback","commonjsGlobal","createCommonjsModule","fn","umd","__decorate","decorators","target","desc","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","__spreadArray","to","from","il","SWITCH_TO_STRUCTURE","TYPE_ID","OPERATION","Root","refs","Map","refCounts","deletedRefs","Set","nextUniqueId","getNextUniqueId","addRef","refId","ref","incrementCount","set","removeRef","add","clearRefs","garbageCollectDeletedRefs","Schema","fieldName","schema","definition","parent","_definition","fieldsByIndex","parentIndex","values","child","delete","ChangeTree","root","changed","changes","allChanges","caches","currentCustomOperation","setParent","indexes","field","parentIndex_1","changeTreee","parentIndex_2","operation","change","ADD","assertValidIndex","previousChange","DELETE","TOUCH","DELETE_AND_ADD","touchParents","touch","has","getType","parentType","getChildrenFilter","childFilters","getValue","console","warn","previousValue","discard","discardAll","cache","cachedBytes","clone","ensureRefId","DEFAULT_SORT","A","B","getArrayProxy","Proxy","obj","prop","isNaN","at","setValue","parseInt","deleteAt","setAt","deleteProperty","ArraySchema","items","$changes","$items","$indexes","$refId","is","splice","enumerable","configurable","lastIndex","_a","_b","$deleteAt","isDecoding","item","CLEAR","concat","separator","reverse","reversedItems","shiftAt","start","sort","compareFn","sortedItems","deleteCount","removedItems","unshift","addedLength","previousValues","searchElement","fromIndex","lastIndexOf","every","callbackfn","some","reduce","initialValue","reduceRight","find","predicate","findIndex","fill","copyWithin","toLocaleString","unscopables","entries","includes","flatMap","flat","depth","setIndex","getIndex","getByIndex","deleteByIndex","toArray","cloned","triggerAll","getMapProxy","MapSchema","initialValues","toStringTag","hasIndex","REPLACE","isRef","registeredTypes","registerType","identifier","SchemaDefinition","deprecated","descriptors","addField","getNextFieldIndex","array","addFilter","filters","indexesWithFilters","addChildrenFilter","hasFilter","klass","_context","useFilters","Context","types","schemas","typeid","_typeid","context","globalContext","definitionAtLine","stack","isMap","childType","fieldCached","writable","filterChildren","throws","defineTypes","fields","int8$1","uint8$1","int16$1","uint16$1","int32$1","uint32$1","b4","b3","b2","b1","int64$1","high","low","uint64$1","float32$1","writeFloat32","float64$1","writeFloat64","_int32$1","Int32Array","_float32$1","Float32Array","_float64$1","Float64Array","boolean$1","string$1","number$1","Number","MAX_SAFE_INTEGER","int8","uint8","int16","uint16","int32","uint32","int64","uint64","float32","float64","boolean","number","error","it","readFloat32","readFloat64","_int32","_float32","_float64","stringCheck","numberCheck","arrayCheck","switchStructureCheck","CollectionSchema","entry","SetSchema","EventEmitter_","ClientState","refIds","WeakSet","containerIndexes","WeakMap","addRefId","changeTree","client","$filterState","EncodeSchemaError","assertType","typeofTarget","allowNull","log","foundValue","assertInstanceType","encodePrimitiveType","encodeFunc","decodePrimitiveType","defineProperties","$listeners","onError","props","listen","attr","$root","totalBytes","nextRef","isSchema","fieldIndex","dynamicIndex","nextIterator","refId_1","getSchemaType","createTypeInstance","onChange","onRemove","typeDef","refId_2","valueRef","onAdd","deletes","iter","value_1","getProxy","hasChange","_triggerChanges","encodeAll","rootChangeTree","refIdsVisited","changeTrees","numChangeTrees","cl","beginIndex","tryEncodeTypeId","applyFilters","refIdsDissallowed","filteredBytes","_loop_1","clientHasRefId","isEncodeAll","indexWithFilter","_triggerAllFillChanges","discardAllChanges","targetType","defaultType","instance","_field","_c","_d","_e","_f","_g","_h","_j","_k","_l","_m","listener","dumpChanges","dump","currentStructure","reflectionContext","ReflectionField","ReflectionType","Reflection","rootSchemaType","reflection","rootType","buildType","currentType","fieldType","type_1","childTypeSchema","referencedType","type_2","schemaTypes","reflectionType","schemaType","refType","typeInfo","rootInstance","Room","rootSchema","onStateChange","onLeave","onJoin","hasJoined","onMessageHandlers","state","removeAllListeners","endpoint","connection","onMessageCallback","destroy","leave","consented","LEAVE_ROOM","onMessage","getMessageHandlerKey","initialBytes","ROOM_DATA","encoded","getState","JOIN_ROOM","serializerId","handshake","ERROR","it_1","code_1","ROOM_DATA_SCHEMA","it_2","context_1","dispatchMessage","ROOM_STATE","setState","ROOM_STATE_PATCH","it_3","encodedState","binaryPatch","messageType","teardown","storage","getStorage","cc","sys","localStorage","setItem","getItem","removeItem","TOKEN_STORAGE","Platform","Auth","_id","username","displayName","avatarUrl","isAnonymous","email","lang","location","timezone","metadata","devices","facebookId","twitterId","googleId","gameCenterId","steamId","friendIds","blockedUserIds","createdAt","updatedAt","token","replace","login","options","queryParams","hasToken","request","registerPingService","save","getFriends","getOnlineFriends","getFriendRequests","sendFriendRequest","friendId","userId","acceptFriendRequest","declineFriendRequest","blockUser","unblockUser","segments","query","name_1","queryString","logout","unregisterPingService","keepOnlineInterval","setInterval","clearInterval","MatchMakeError","DEFAULT_ENDPOINT","hostname","protocol","port","Client","_auth","joinOrCreate","roomName","createMatchMakeRequest","joinById","roomId","reconnect","sessionId","getAvailableRooms","consumeSeatReservation","room","createRoom","buildEndpoint","params","processId","SchemaSerializer","rawState","patches","NoneSerializer","_cjsExports","_Protocol","_ErrorCode","_OPERATION","_ArraySchema","_CollectionSchema","_Context","_MapSchema","_Reflection","_ReflectionField","_ReflectionType","_Schema","_SchemaDefinition","_SetSchema","_decode","_defineTypes","_deprecated","_dumpChanges","_encode0","_filter","_filterChildren","_hasFilter","_registerType","_type","___esModule","__esModule","_Platform","_Auth","_Client","_Room","_SchemaSerializer","_registerSerializer"],"mappings":"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","sourcesContent":["import _cjsLoader from 'cce:/internal/ml/cjs-loader.mjs';\nlet _cjsExports;\nlet _Protocol;\nlet _ErrorCode;\nlet _OPERATION;\nlet _ArraySchema;\nlet _CollectionSchema;\nlet _Context;\nlet _MapSchema;\nlet _Reflection;\nlet _ReflectionField;\nlet _ReflectionType;\nlet _Schema;\nlet _SchemaDefinition;\nlet _SetSchema;\nlet _decode;\nlet _defineTypes;\nlet _deprecated;\nlet _dumpChanges;\nlet _encode0;\nlet _filter;\nlet _filterChildren;\nlet _hasFilter;\nlet _registerType;\nlet _type;\nlet ___esModule;\nlet _Platform;\nlet _Auth;\nlet _Client;\nlet _Room;\nlet _SchemaSerializer;\nlet _registerSerializer;\nconst __cjsMetaURL = import.meta.url;\n_cjsLoader.define(__cjsMetaURL, function (exports, require, module, __filename, __dirname) {\n// #region ORIGINAL CODE\n\n\n // colyseus.js@0.14.12 (@colyseus/schema 1.0.22)\n (function (global, factory) {\n     typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n     typeof define === 'function' && define.amd ? define('colyseus.js', ['exports'], factory) :\n     (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.Colyseus = {}));\n }(this, (function (exports) { 'use strict';\n\n     //\n     // Polyfills for legacy environments\n     //\n     /*\n      * Support Android 4.4.x\n      */\n     if (!ArrayBuffer.isView) {\n         ArrayBuffer.isView = function (a) {\n             return a !== null && typeof (a) === 'object' && a.buffer instanceof ArrayBuffer;\n         };\n     }\n     // Define globalThis if not available.\n     // https://github.com/colyseus/colyseus.js/issues/86\n     if (typeof (globalThis) === \"undefined\" &&\n         typeof (window) !== \"undefined\") {\n         // @ts-ignore\n         window['globalThis'] = window;\n     }\n\n     /*! *****************************************************************************\r\n     Copyright (c) Microsoft Corporation.\r\n\r\n     Permission to use, copy, modify, and/or distribute this software for any\r\n     purpose with or without fee is hereby granted.\r\n\r\n     THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\n     REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\n     AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\n     INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\n     LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\n     OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\n     PERFORMANCE OF THIS SOFTWARE.\r\n     ***************************************************************************** */\r\n     /* global Reflect, Promise */\r\n\r\n     var extendStatics = function(d, b) {\r\n         extendStatics = Object.setPrototypeOf ||\r\n             ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n             function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n         return extendStatics(d, b);\r\n     };\r\n\r\n     function __extends(d, b) {\r\n         if (typeof b !== \"function\" && b !== null)\r\n             throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n         extendStatics(d, b);\r\n         function __() { this.constructor = d; }\r\n         d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n     }\r\n\r\n     function __awaiter(thisArg, _arguments, P, generator) {\r\n         function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n         return new (P || (P = Promise))(function (resolve, reject) {\r\n             function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n             function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n             function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n             step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n         });\r\n     }\r\n\r\n     function __generator(thisArg, body) {\r\n         var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n         return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n         function verb(n) { return function (v) { return step([n, v]); }; }\r\n         function step(op) {\r\n             if (f) throw new TypeError(\"Generator is already executing.\");\r\n             while (_) try {\r\n                 if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n                 if (y = 0, t) op = [op[0] & 2, t.value];\r\n                 switch (op[0]) {\r\n                     case 0: case 1: t = op; break;\r\n                     case 4: _.label++; return { value: op[1], done: false };\r\n                     case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                     case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                     default:\r\n                         if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                         if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                         if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                         if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                         if (t[2]) _.ops.pop();\r\n                         _.trys.pop(); continue;\r\n                 }\r\n                 op = body.call(thisArg, _);\r\n             } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n             if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n         }\r\n     }\n\n     function apply(src, tar) {\n     \ttar.headers = src.headers || {};\n     \ttar.statusMessage = src.statusText;\n     \ttar.statusCode = src.status;\n     \ttar.data = src.response;\n     }\n\n     function send(method, uri, opts) {\n     \treturn new Promise(function (res, rej) {\n     \t\topts = opts || {};\n     \t\tvar req = new XMLHttpRequest;\n     \t\tvar k, tmp, arr, str=opts.body;\n     \t\tvar headers = opts.headers || {};\n\n     \t\t// IE compatible\n     \t\tif (opts.timeout) req.timeout = opts.timeout;\n     \t\treq.ontimeout = req.onerror = function (err) {\n     \t\t\terr.timeout = err.type == 'timeout';\n     \t\t\trej(err);\n     \t\t};\n\n     \t\treq.open(method, uri.href || uri);\n\n     \t\treq.onload = function () {\n     \t\t\tarr = req.getAllResponseHeaders().trim().split(/[\\r\\n]+/);\n     \t\t\tapply(req, req); //=> req.headers\n\n     \t\t\twhile (tmp = arr.shift()) {\n     \t\t\t\ttmp = tmp.split(': ');\n     \t\t\t\treq.headers[tmp.shift().toLowerCase()] = tmp.join(': ');\n     \t\t\t}\n\n     \t\t\ttmp = req.headers['content-type'];\n     \t\t\tif (tmp && !!~tmp.indexOf('application/json')) {\n     \t\t\t\ttry {\n     \t\t\t\t\treq.data = JSON.parse(req.data, opts.reviver);\n     \t\t\t\t} catch (err) {\n     \t\t\t\t\tapply(req, err);\n     \t\t\t\t\treturn rej(err);\n     \t\t\t\t}\n     \t\t\t}\n\n     \t\t\t(req.status >= 400 ? rej : res)(req);\n     \t\t};\n\n     \t\tif (typeof FormData < 'u' && str instanceof FormData) ; else if (str && typeof str == 'object') {\n     \t\t\theaders['content-type'] = 'application/json';\n     \t\t\tstr = JSON.stringify(str);\n     \t\t}\n\n     \t\treq.withCredentials = !!opts.withCredentials;\n\n     \t\tfor (k in headers) {\n     \t\t\treq.setRequestHeader(k, headers[k]);\n     \t\t}\n\n     \t\treq.send(str);\n     \t});\n     }\n\n     var get = /*#__PURE__*/ send.bind(send, 'GET');\n     var post = /*#__PURE__*/ send.bind(send, 'POST');\n     var patch = /*#__PURE__*/ send.bind(send, 'PATCH');\n     var del = /*#__PURE__*/ send.bind(send, 'DELETE');\n     var put = /*#__PURE__*/ send.bind(send, 'PUT');\n\n     var del_1 = del;\n     var get_1 = get;\n     var patch_1 = patch;\n     var post_1 = post;\n     var put_1 = put;\n     var send_1 = send;\n\n     var xhr = {\n     \tdel: del_1,\n     \tget: get_1,\n     \tpatch: patch_1,\n     \tpost: post_1,\n     \tput: put_1,\n     \tsend: send_1\n     };\n\n     var http = /*#__PURE__*/Object.freeze(/*#__PURE__*/Object.assign(/*#__PURE__*/Object.create(null), xhr, {\n         'default': xhr,\n         del: del_1,\n         get: get_1,\n         patch: patch_1,\n         post: post_1,\n         put: put_1,\n         send: send_1\n     }));\n\n     var ServerError = /** @class */ (function (_super) {\n         __extends(ServerError, _super);\n         function ServerError(code, message) {\n             var _this = _super.call(this, message) || this;\n             _this.name = \"ServerError\";\n             _this.code = code;\n             return _this;\n         }\n         return ServerError;\n     }(Error));\n\n     /**\n      * Copyright (c) 2014 Ion Drive Software Ltd.\n      * https://github.com/darrachequesne/notepack/\n      *\n      * Permission is hereby granted, free of charge, to any person obtaining a copy\n      * of this software and associated documentation files (the \"Software\"), to deal\n      * in the Software without restriction, including without limitation the rights\n      * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n      * copies of the Software, and to permit persons to whom the Software is\n      * furnished to do so, subject to the following conditions:\n      *\n      * The above copyright notice and this permission notice shall be included in all\n      * copies or substantial portions of the Software.\n      *\n      * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n      * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n      * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n      * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n      * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n      * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n      * SOFTWARE.\n      */\n     /**\n      * Patch for Colyseus:\n      * -------------------\n      *\n      * added `offset` on Decoder constructor, for messages arriving with a code\n      * before actual msgpack data\n      */\n     // \n     // DECODER\n     // \n     function Decoder(buffer, offset) {\n         this._offset = offset;\n         if (buffer instanceof ArrayBuffer) {\n             this._buffer = buffer;\n             this._view = new DataView(this._buffer);\n         }\n         else if (ArrayBuffer.isView(buffer)) {\n             this._buffer = buffer.buffer;\n             this._view = new DataView(this._buffer, buffer.byteOffset, buffer.byteLength);\n         }\n         else {\n             throw new Error('Invalid argument');\n         }\n     }\n     function utf8Read$1(view, offset, length) {\n         var string = '', chr = 0;\n         for (var i = offset, end = offset + length; i < end; i++) {\n             var byte = view.getUint8(i);\n             if ((byte & 0x80) === 0x00) {\n                 string += String.fromCharCode(byte);\n                 continue;\n             }\n             if ((byte & 0xe0) === 0xc0) {\n                 string += String.fromCharCode(((byte & 0x1f) << 6) |\n                     (view.getUint8(++i) & 0x3f));\n                 continue;\n             }\n             if ((byte & 0xf0) === 0xe0) {\n                 string += String.fromCharCode(((byte & 0x0f) << 12) |\n                     ((view.getUint8(++i) & 0x3f) << 6) |\n                     ((view.getUint8(++i) & 0x3f) << 0));\n                 continue;\n             }\n             if ((byte & 0xf8) === 0xf0) {\n                 chr = ((byte & 0x07) << 18) |\n                     ((view.getUint8(++i) & 0x3f) << 12) |\n                     ((view.getUint8(++i) & 0x3f) << 6) |\n                     ((view.getUint8(++i) & 0x3f) << 0);\n                 if (chr >= 0x010000) { // surrogate pair\n                     chr -= 0x010000;\n                     string += String.fromCharCode((chr >>> 10) + 0xD800, (chr & 0x3FF) + 0xDC00);\n                 }\n                 else {\n                     string += String.fromCharCode(chr);\n                 }\n                 continue;\n             }\n             throw new Error('Invalid byte ' + byte.toString(16));\n         }\n         return string;\n     }\n     Decoder.prototype._array = function (length) {\n         var value = new Array(length);\n         for (var i = 0; i < length; i++) {\n             value[i] = this._parse();\n         }\n         return value;\n     };\n     Decoder.prototype._map = function (length) {\n         var key = '', value = {};\n         for (var i = 0; i < length; i++) {\n             key = this._parse();\n             value[key] = this._parse();\n         }\n         return value;\n     };\n     Decoder.prototype._str = function (length) {\n         var value = utf8Read$1(this._view, this._offset, length);\n         this._offset += length;\n         return value;\n     };\n     Decoder.prototype._bin = function (length) {\n         var value = this._buffer.slice(this._offset, this._offset + length);\n         this._offset += length;\n         return value;\n     };\n     Decoder.prototype._parse = function () {\n         var prefix = this._view.getUint8(this._offset++);\n         var value, length = 0, type = 0, hi = 0, lo = 0;\n         if (prefix < 0xc0) {\n             // positive fixint\n             if (prefix < 0x80) {\n                 return prefix;\n             }\n             // fixmap\n             if (prefix < 0x90) {\n                 return this._map(prefix & 0x0f);\n             }\n             // fixarray\n             if (prefix < 0xa0) {\n                 return this._array(prefix & 0x0f);\n             }\n             // fixstr\n             return this._str(prefix & 0x1f);\n         }\n         // negative fixint\n         if (prefix > 0xdf) {\n             return (0xff - prefix + 1) * -1;\n         }\n         switch (prefix) {\n             // nil\n             case 0xc0:\n                 return null;\n             // false\n             case 0xc2:\n                 return false;\n             // true\n             case 0xc3:\n                 return true;\n             // bin\n             case 0xc4:\n                 length = this._view.getUint8(this._offset);\n                 this._offset += 1;\n                 return this._bin(length);\n             case 0xc5:\n                 length = this._view.getUint16(this._offset);\n                 this._offset += 2;\n                 return this._bin(length);\n             case 0xc6:\n                 length = this._view.getUint32(this._offset);\n                 this._offset += 4;\n                 return this._bin(length);\n             // ext\n             case 0xc7:\n                 length = this._view.getUint8(this._offset);\n                 type = this._view.getInt8(this._offset + 1);\n                 this._offset += 2;\n                 return [type, this._bin(length)];\n             case 0xc8:\n                 length = this._view.getUint16(this._offset);\n                 type = this._view.getInt8(this._offset + 2);\n                 this._offset += 3;\n                 return [type, this._bin(length)];\n             case 0xc9:\n                 length = this._view.getUint32(this._offset);\n                 type = this._view.getInt8(this._offset + 4);\n                 this._offset += 5;\n                 return [type, this._bin(length)];\n             // float\n             case 0xca:\n                 value = this._view.getFloat32(this._offset);\n                 this._offset += 4;\n                 return value;\n             case 0xcb:\n                 value = this._view.getFloat64(this._offset);\n                 this._offset += 8;\n                 return value;\n             // uint\n             case 0xcc:\n                 value = this._view.getUint8(this._offset);\n                 this._offset += 1;\n                 return value;\n             case 0xcd:\n                 value = this._view.getUint16(this._offset);\n                 this._offset += 2;\n                 return value;\n             case 0xce:\n                 value = this._view.getUint32(this._offset);\n                 this._offset += 4;\n                 return value;\n             case 0xcf:\n                 hi = this._view.getUint32(this._offset) * Math.pow(2, 32);\n                 lo = this._view.getUint32(this._offset + 4);\n                 this._offset += 8;\n                 return hi + lo;\n             // int\n             case 0xd0:\n                 value = this._view.getInt8(this._offset);\n                 this._offset += 1;\n                 return value;\n             case 0xd1:\n                 value = this._view.getInt16(this._offset);\n                 this._offset += 2;\n                 return value;\n             case 0xd2:\n                 value = this._view.getInt32(this._offset);\n                 this._offset += 4;\n                 return value;\n             case 0xd3:\n                 hi = this._view.getInt32(this._offset) * Math.pow(2, 32);\n                 lo = this._view.getUint32(this._offset + 4);\n                 this._offset += 8;\n                 return hi + lo;\n             // fixext\n             case 0xd4:\n                 type = this._view.getInt8(this._offset);\n                 this._offset += 1;\n                 if (type === 0x00) {\n                     this._offset += 1;\n                     return void 0;\n                 }\n                 return [type, this._bin(1)];\n             case 0xd5:\n                 type = this._view.getInt8(this._offset);\n                 this._offset += 1;\n                 return [type, this._bin(2)];\n             case 0xd6:\n                 type = this._view.getInt8(this._offset);\n                 this._offset += 1;\n                 return [type, this._bin(4)];\n             case 0xd7:\n                 type = this._view.getInt8(this._offset);\n                 this._offset += 1;\n                 if (type === 0x00) {\n                     hi = this._view.getInt32(this._offset) * Math.pow(2, 32);\n                     lo = this._view.getUint32(this._offset + 4);\n                     this._offset += 8;\n                     return new Date(hi + lo);\n                 }\n                 return [type, this._bin(8)];\n             case 0xd8:\n                 type = this._view.getInt8(this._offset);\n                 this._offset += 1;\n                 return [type, this._bin(16)];\n             // str\n             case 0xd9:\n                 length = this._view.getUint8(this._offset);\n                 this._offset += 1;\n                 return this._str(length);\n             case 0xda:\n                 length = this._view.getUint16(this._offset);\n                 this._offset += 2;\n                 return this._str(length);\n             case 0xdb:\n                 length = this._view.getUint32(this._offset);\n                 this._offset += 4;\n                 return this._str(length);\n             // array\n             case 0xdc:\n                 length = this._view.getUint16(this._offset);\n                 this._offset += 2;\n                 return this._array(length);\n             case 0xdd:\n                 length = this._view.getUint32(this._offset);\n                 this._offset += 4;\n                 return this._array(length);\n             // map\n             case 0xde:\n                 length = this._view.getUint16(this._offset);\n                 this._offset += 2;\n                 return this._map(length);\n             case 0xdf:\n                 length = this._view.getUint32(this._offset);\n                 this._offset += 4;\n                 return this._map(length);\n         }\n         throw new Error('Could not parse');\n     };\n     function decode(buffer, offset) {\n         if (offset === void 0) { offset = 0; }\n         var decoder = new Decoder(buffer, offset);\n         var value = decoder._parse();\n         if (decoder._offset !== buffer.byteLength) {\n             throw new Error((buffer.byteLength - decoder._offset) + ' trailing bytes');\n         }\n         return value;\n     }\n     // \n     // ENCODER\n     // \n     function utf8Write(view, offset, str) {\n         var c = 0;\n         for (var i = 0, l = str.length; i < l; i++) {\n             c = str.charCodeAt(i);\n             if (c < 0x80) {\n                 view.setUint8(offset++, c);\n             }\n             else if (c < 0x800) {\n                 view.setUint8(offset++, 0xc0 | (c >> 6));\n                 view.setUint8(offset++, 0x80 | (c & 0x3f));\n             }\n             else if (c < 0xd800 || c >= 0xe000) {\n                 view.setUint8(offset++, 0xe0 | (c >> 12));\n                 view.setUint8(offset++, 0x80 | (c >> 6) & 0x3f);\n                 view.setUint8(offset++, 0x80 | (c & 0x3f));\n             }\n             else {\n                 i++;\n                 c = 0x10000 + (((c & 0x3ff) << 10) | (str.charCodeAt(i) & 0x3ff));\n                 view.setUint8(offset++, 0xf0 | (c >> 18));\n                 view.setUint8(offset++, 0x80 | (c >> 12) & 0x3f);\n                 view.setUint8(offset++, 0x80 | (c >> 6) & 0x3f);\n                 view.setUint8(offset++, 0x80 | (c & 0x3f));\n             }\n         }\n     }\n     function utf8Length$1(str) {\n         var c = 0, length = 0;\n         for (var i = 0, l = str.length; i < l; i++) {\n             c = str.charCodeAt(i);\n             if (c < 0x80) {\n                 length += 1;\n             }\n             else if (c < 0x800) {\n                 length += 2;\n             }\n             else if (c < 0xd800 || c >= 0xe000) {\n                 length += 3;\n             }\n             else {\n                 i++;\n                 length += 4;\n             }\n         }\n         return length;\n     }\n     function _encode(bytes, defers, value) {\n         var type = typeof value, i = 0, l = 0, hi = 0, lo = 0, length = 0, size = 0;\n         if (type === 'string') {\n             length = utf8Length$1(value);\n             // fixstr\n             if (length < 0x20) {\n                 bytes.push(length | 0xa0);\n                 size = 1;\n             }\n             // str 8\n             else if (length < 0x100) {\n                 bytes.push(0xd9, length);\n                 size = 2;\n             }\n             // str 16\n             else if (length < 0x10000) {\n                 bytes.push(0xda, length >> 8, length);\n                 size = 3;\n             }\n             // str 32\n             else if (length < 0x100000000) {\n                 bytes.push(0xdb, length >> 24, length >> 16, length >> 8, length);\n                 size = 5;\n             }\n             else {\n                 throw new Error('String too long');\n             }\n             defers.push({ _str: value, _length: length, _offset: bytes.length });\n             return size + length;\n         }\n         if (type === 'number') {\n             // TODO: encode to float 32?\n             // float 64\n             if (Math.floor(value) !== value || !isFinite(value)) {\n                 bytes.push(0xcb);\n                 defers.push({ _float: value, _length: 8, _offset: bytes.length });\n                 return 9;\n             }\n             if (value >= 0) {\n                 // positive fixnum\n                 if (value < 0x80) {\n                     bytes.push(value);\n                     return 1;\n                 }\n                 // uint 8\n                 if (value < 0x100) {\n                     bytes.push(0xcc, value);\n                     return 2;\n                 }\n                 // uint 16\n                 if (value < 0x10000) {\n                     bytes.push(0xcd, value >> 8, value);\n                     return 3;\n                 }\n                 // uint 32\n                 if (value < 0x100000000) {\n                     bytes.push(0xce, value >> 24, value >> 16, value >> 8, value);\n                     return 5;\n                 }\n                 // uint 64\n                 hi = (value / Math.pow(2, 32)) >> 0;\n                 lo = value >>> 0;\n                 bytes.push(0xcf, hi >> 24, hi >> 16, hi >> 8, hi, lo >> 24, lo >> 16, lo >> 8, lo);\n                 return 9;\n             }\n             else {\n                 // negative fixnum\n                 if (value >= -0x20) {\n                     bytes.push(value);\n                     return 1;\n                 }\n                 // int 8\n                 if (value >= -0x80) {\n                     bytes.push(0xd0, value);\n                     return 2;\n                 }\n                 // int 16\n                 if (value >= -0x8000) {\n                     bytes.push(0xd1, value >> 8, value);\n                     return 3;\n                 }\n                 // int 32\n                 if (value >= -0x80000000) {\n                     bytes.push(0xd2, value >> 24, value >> 16, value >> 8, value);\n                     return 5;\n                 }\n                 // int 64\n                 hi = Math.floor(value / Math.pow(2, 32));\n                 lo = value >>> 0;\n                 bytes.push(0xd3, hi >> 24, hi >> 16, hi >> 8, hi, lo >> 24, lo >> 16, lo >> 8, lo);\n                 return 9;\n             }\n         }\n         if (type === 'object') {\n             // nil\n             if (value === null) {\n                 bytes.push(0xc0);\n                 return 1;\n             }\n             if (Array.isArray(value)) {\n                 length = value.length;\n                 // fixarray\n                 if (length < 0x10) {\n                     bytes.push(length | 0x90);\n                     size = 1;\n                 }\n                 // array 16\n                 else if (length < 0x10000) {\n                     bytes.push(0xdc, length >> 8, length);\n                     size = 3;\n                 }\n                 // array 32\n                 else if (length < 0x100000000) {\n                     bytes.push(0xdd, length >> 24, length >> 16, length >> 8, length);\n                     size = 5;\n                 }\n                 else {\n                     throw new Error('Array too large');\n                 }\n                 for (i = 0; i < length; i++) {\n                     size += _encode(bytes, defers, value[i]);\n                 }\n                 return size;\n             }\n             // fixext 8 / Date\n             if (value instanceof Date) {\n                 var time = value.getTime();\n                 hi = Math.floor(time / Math.pow(2, 32));\n                 lo = time >>> 0;\n                 bytes.push(0xd7, 0, hi >> 24, hi >> 16, hi >> 8, hi, lo >> 24, lo >> 16, lo >> 8, lo);\n                 return 10;\n             }\n             if (value instanceof ArrayBuffer) {\n                 length = value.byteLength;\n                 // bin 8\n                 if (length < 0x100) {\n                     bytes.push(0xc4, length);\n                     size = 2;\n                 }\n                 else \n                 // bin 16\n                 if (length < 0x10000) {\n                     bytes.push(0xc5, length >> 8, length);\n                     size = 3;\n                 }\n                 else \n                 // bin 32\n                 if (length < 0x100000000) {\n                     bytes.push(0xc6, length >> 24, length >> 16, length >> 8, length);\n                     size = 5;\n                 }\n                 else {\n                     throw new Error('Buffer too large');\n                 }\n                 defers.push({ _bin: value, _length: length, _offset: bytes.length });\n                 return size + length;\n             }\n             if (typeof value.toJSON === 'function') {\n                 return _encode(bytes, defers, value.toJSON());\n             }\n             var keys = [], key = '';\n             var allKeys = Object.keys(value);\n             for (i = 0, l = allKeys.length; i < l; i++) {\n                 key = allKeys[i];\n                 if (typeof value[key] !== 'function') {\n                     keys.push(key);\n                 }\n             }\n             length = keys.length;\n             // fixmap\n             if (length < 0x10) {\n                 bytes.push(length | 0x80);\n                 size = 1;\n             }\n             // map 16\n             else if (length < 0x10000) {\n                 bytes.push(0xde, length >> 8, length);\n                 size = 3;\n             }\n             // map 32\n             else if (length < 0x100000000) {\n                 bytes.push(0xdf, length >> 24, length >> 16, length >> 8, length);\n                 size = 5;\n             }\n             else {\n                 throw new Error('Object too large');\n             }\n             for (i = 0; i < length; i++) {\n                 key = keys[i];\n                 size += _encode(bytes, defers, key);\n                 size += _encode(bytes, defers, value[key]);\n             }\n             return size;\n         }\n         // false/true\n         if (type === 'boolean') {\n             bytes.push(value ? 0xc3 : 0xc2);\n             return 1;\n         }\n         // fixext 1 / undefined\n         if (type === 'undefined') {\n             bytes.push(0xd4, 0, 0);\n             return 3;\n         }\n         throw new Error('Could not encode');\n     }\n     function encode(value) {\n         var bytes = [];\n         var defers = [];\n         var size = _encode(bytes, defers, value);\n         var buf = new ArrayBuffer(size);\n         var view = new DataView(buf);\n         var deferIndex = 0;\n         var deferWritten = 0;\n         var nextOffset = -1;\n         if (defers.length > 0) {\n             nextOffset = defers[0]._offset;\n         }\n         var defer, deferLength = 0, offset = 0;\n         for (var i = 0, l = bytes.length; i < l; i++) {\n             view.setUint8(deferWritten + i, bytes[i]);\n             if (i + 1 !== nextOffset) {\n                 continue;\n             }\n             defer = defers[deferIndex];\n             deferLength = defer._length;\n             offset = deferWritten + nextOffset;\n             if (defer._bin) {\n                 var bin = new Uint8Array(defer._bin);\n                 for (var j = 0; j < deferLength; j++) {\n                     view.setUint8(offset + j, bin[j]);\n                 }\n             }\n             else if (defer._str) {\n                 utf8Write(view, offset, defer._str);\n             }\n             else if (defer._float !== undefined) {\n                 view.setFloat64(offset, defer._float);\n             }\n             deferIndex++;\n             deferWritten += deferLength;\n             if (defers[deferIndex]) {\n                 nextOffset = defers[deferIndex]._offset;\n             }\n         }\n         return buf;\n     }\n\n     var browser = function () {\n       throw new Error(\n         'ws does not work in the browser. Browser clients must use the native ' +\n           'WebSocket object'\n       );\n     };\n\n     var WebSocket = globalThis.WebSocket || browser;\n     var WebSocketTransport = /** @class */ (function () {\n         function WebSocketTransport(events) {\n             this.events = events;\n         }\n         WebSocketTransport.prototype.send = function (data) {\n             if (data instanceof ArrayBuffer) {\n                 this.ws.send(data);\n             }\n             else if (Array.isArray(data)) {\n                 this.ws.send((new Uint8Array(data)).buffer);\n             }\n         };\n         WebSocketTransport.prototype.connect = function (url) {\n             this.ws = new WebSocket(url, this.protocols);\n             this.ws.binaryType = 'arraybuffer';\n             this.ws.onopen = this.events.onopen;\n             this.ws.onmessage = this.events.onmessage;\n             this.ws.onclose = this.events.onclose;\n             this.ws.onerror = this.events.onerror;\n         };\n         WebSocketTransport.prototype.close = function (code, reason) {\n             this.ws.close(code, reason);\n         };\n         return WebSocketTransport;\n     }());\n\n     var Connection = /** @class */ (function () {\n         function Connection() {\n             this.events = {};\n             this.transport = new WebSocketTransport(this.events);\n         }\n         Connection.prototype.send = function (data) {\n             this.transport.send(data);\n         };\n         Connection.prototype.connect = function (url) {\n             this.transport.connect(url);\n         };\n         Connection.prototype.close = function (code, reason) {\n             this.transport.close(code, reason);\n         };\n         return Connection;\n     }());\n\n     var serializers = {};\n     function registerSerializer(id, serializer) {\n         serializers[id] = serializer;\n     }\n     function getSerializer(id) {\n         var serializer = serializers[id];\n         if (!serializer) {\n             throw new Error(\"missing serializer: \" + id);\n         }\n         return serializer;\n     }\n\n     // Use codes between 0~127 for lesser throughput (1 byte)\n     exports.Protocol = void 0;\n     (function (Protocol) {\n         // Room-related (10~19)\n         Protocol[Protocol[\"HANDSHAKE\"] = 9] = \"HANDSHAKE\";\n         Protocol[Protocol[\"JOIN_ROOM\"] = 10] = \"JOIN_ROOM\";\n         Protocol[Protocol[\"ERROR\"] = 11] = \"ERROR\";\n         Protocol[Protocol[\"LEAVE_ROOM\"] = 12] = \"LEAVE_ROOM\";\n         Protocol[Protocol[\"ROOM_DATA\"] = 13] = \"ROOM_DATA\";\n         Protocol[Protocol[\"ROOM_STATE\"] = 14] = \"ROOM_STATE\";\n         Protocol[Protocol[\"ROOM_STATE_PATCH\"] = 15] = \"ROOM_STATE_PATCH\";\n         Protocol[Protocol[\"ROOM_DATA_SCHEMA\"] = 16] = \"ROOM_DATA_SCHEMA\";\n     })(exports.Protocol || (exports.Protocol = {}));\n     exports.ErrorCode = void 0;\n     (function (ErrorCode) {\n         ErrorCode[ErrorCode[\"MATCHMAKE_NO_HANDLER\"] = 4210] = \"MATCHMAKE_NO_HANDLER\";\n         ErrorCode[ErrorCode[\"MATCHMAKE_INVALID_CRITERIA\"] = 4211] = \"MATCHMAKE_INVALID_CRITERIA\";\n         ErrorCode[ErrorCode[\"MATCHMAKE_INVALID_ROOM_ID\"] = 4212] = \"MATCHMAKE_INVALID_ROOM_ID\";\n         ErrorCode[ErrorCode[\"MATCHMAKE_UNHANDLED\"] = 4213] = \"MATCHMAKE_UNHANDLED\";\n         ErrorCode[ErrorCode[\"MATCHMAKE_EXPIRED\"] = 4214] = \"MATCHMAKE_EXPIRED\";\n         ErrorCode[ErrorCode[\"AUTH_FAILED\"] = 4215] = \"AUTH_FAILED\";\n         ErrorCode[ErrorCode[\"APPLICATION_ERROR\"] = 4216] = \"APPLICATION_ERROR\";\n     })(exports.ErrorCode || (exports.ErrorCode = {}));\n     function utf8Read(view, offset) {\n         var length = view[offset++];\n         var string = '', chr = 0;\n         for (var i = offset, end = offset + length; i < end; i++) {\n             var byte = view[i];\n             if ((byte & 0x80) === 0x00) {\n                 string += String.fromCharCode(byte);\n                 continue;\n             }\n             if ((byte & 0xe0) === 0xc0) {\n                 string += String.fromCharCode(((byte & 0x1f) << 6) |\n                     (view[++i] & 0x3f));\n                 continue;\n             }\n             if ((byte & 0xf0) === 0xe0) {\n                 string += String.fromCharCode(((byte & 0x0f) << 12) |\n                     ((view[++i] & 0x3f) << 6) |\n                     ((view[++i] & 0x3f) << 0));\n                 continue;\n             }\n             if ((byte & 0xf8) === 0xf0) {\n                 chr = ((byte & 0x07) << 18) |\n                     ((view[++i] & 0x3f) << 12) |\n                     ((view[++i] & 0x3f) << 6) |\n                     ((view[++i] & 0x3f) << 0);\n                 if (chr >= 0x010000) { // surrogate pair\n                     chr -= 0x010000;\n                     string += String.fromCharCode((chr >>> 10) + 0xD800, (chr & 0x3FF) + 0xDC00);\n                 }\n                 else {\n                     string += String.fromCharCode(chr);\n                 }\n                 continue;\n             }\n             throw new Error('Invalid byte ' + byte.toString(16));\n         }\n         return string;\n     }\n     // Faster for short strings than Buffer.byteLength\n     function utf8Length(str) {\n         if (str === void 0) { str = ''; }\n         var c = 0;\n         var length = 0;\n         for (var i = 0, l = str.length; i < l; i++) {\n             c = str.charCodeAt(i);\n             if (c < 0x80) {\n                 length += 1;\n             }\n             else if (c < 0x800) {\n                 length += 2;\n             }\n             else if (c < 0xd800 || c >= 0xe000) {\n                 length += 3;\n             }\n             else {\n                 i++;\n                 length += 4;\n             }\n         }\n         return length + 1;\n     }\n\n     let createNanoEvents = () => ({\n       events: {},\n       emit (event, ...args) {\n     (this.events[event] || []).forEach(i => i(...args));\n       },\n       on (event, cb) {\n     (this.events[event] = this.events[event] || []).push(cb);\n         return () =>\n           (this.events[event] = (this.events[event] || []).filter(i => i !== cb))\n       }\n     });\n\n     var EventEmitter = /** @class */ (function () {\n         function EventEmitter() {\n             this.handlers = [];\n         }\n         EventEmitter.prototype.register = function (cb, once) {\n             this.handlers.push(cb);\n             return this;\n         };\n         EventEmitter.prototype.invoke = function () {\n             var _this = this;\n             var args = [];\n             for (var _i = 0; _i < arguments.length; _i++) {\n                 args[_i] = arguments[_i];\n             }\n             this.handlers.forEach(function (handler) { return handler.apply(_this, args); });\n         };\n         EventEmitter.prototype.invokeAsync = function () {\n             var _this = this;\n             var args = [];\n             for (var _i = 0; _i < arguments.length; _i++) {\n                 args[_i] = arguments[_i];\n             }\n             return Promise.all(this.handlers.map(function (handler) { return handler.apply(_this, args); }));\n         };\n         EventEmitter.prototype.remove = function (cb) {\n             var index = this.handlers.indexOf(cb);\n             this.handlers[index] = this.handlers[this.handlers.length - 1];\n             this.handlers.pop();\n         };\n         EventEmitter.prototype.clear = function () {\n             this.handlers = [];\n         };\n         return EventEmitter;\n     }());\n     function createSignal() {\n         var emitter = new EventEmitter();\n         function register(cb) {\n             return emitter.register(cb, this === null);\n         }\n         register.once = function (cb) {\n             var callback = function () {\n                 var args = [];\n                 for (var _i = 0; _i < arguments.length; _i++) {\n                     args[_i] = arguments[_i];\n                 }\n                 cb.apply(this, args);\n                 emitter.remove(callback);\n             };\n             emitter.register(callback);\n         };\n         register.remove = function (cb) { return emitter.remove(cb); };\n         register.invoke = function () {\n             var args = [];\n             for (var _i = 0; _i < arguments.length; _i++) {\n                 args[_i] = arguments[_i];\n             }\n             return emitter.invoke.apply(emitter, args);\n         };\n         register.invokeAsync = function () {\n             var args = [];\n             for (var _i = 0; _i < arguments.length; _i++) {\n                 args[_i] = arguments[_i];\n             }\n             return emitter.invokeAsync.apply(emitter, args);\n         };\n         register.clear = function () { return emitter.clear(); };\n         return register;\n     }\n\n     var commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\n     function createCommonjsModule(fn) {\n       var module = { exports: {} };\n     \treturn fn(module, module.exports), module.exports;\n     }\n\n     var umd = createCommonjsModule(function (module, exports) {\n     (function (global, factory) {\n         factory(exports) ;\n     }(commonjsGlobal, (function (exports) {\n         /*! *****************************************************************************\r\n         Copyright (c) Microsoft Corporation.\r\n\r\n         Permission to use, copy, modify, and/or distribute this software for any\r\n         purpose with or without fee is hereby granted.\r\n\r\n         THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\n         REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\n         AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\n         INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\n         LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\n         OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\n         PERFORMANCE OF THIS SOFTWARE.\r\n         ***************************************************************************** */\r\n         /* global Reflect, Promise */\r\n\r\n         var extendStatics = function(d, b) {\r\n             extendStatics = Object.setPrototypeOf ||\r\n                 ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n                 function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n             return extendStatics(d, b);\r\n         };\r\n\r\n         function __extends(d, b) {\r\n             if (typeof b !== \"function\" && b !== null)\r\n                 throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n             extendStatics(d, b);\r\n             function __() { this.constructor = d; }\r\n             d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n         }\r\n\r\n         function __decorate(decorators, target, key, desc) {\r\n             var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n             if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n             else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n             return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n         }\r\n\r\n         function __spreadArray(to, from) {\r\n             for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\r\n                 to[j] = from[i];\r\n             return to;\r\n         }\n\n         // export const SWITCH_TO_STRUCTURE = 193; (easily collides with DELETE_AND_ADD + fieldIndex = 2)\n         var SWITCH_TO_STRUCTURE = 255; // (decoding collides with DELETE_AND_ADD + fieldIndex = 63)\n         var TYPE_ID = 213;\n         /**\n          * Encoding Schema field operations.\n          */\n         exports.OPERATION = void 0;\n         (function (OPERATION) {\n             // add new structure/primitive\n             OPERATION[OPERATION[\"ADD\"] = 128] = \"ADD\";\n             // replace structure/primitive\n             OPERATION[OPERATION[\"REPLACE\"] = 0] = \"REPLACE\";\n             // delete field\n             OPERATION[OPERATION[\"DELETE\"] = 64] = \"DELETE\";\n             // DELETE field, followed by an ADD\n             OPERATION[OPERATION[\"DELETE_AND_ADD\"] = 192] = \"DELETE_AND_ADD\";\n             // TOUCH is used to determine hierarchy of nested Schema structures during serialization.\n             // touches are NOT encoded.\n             OPERATION[OPERATION[\"TOUCH\"] = 1] = \"TOUCH\";\n             // MapSchema Operations\n             OPERATION[OPERATION[\"CLEAR\"] = 10] = \"CLEAR\";\n         })(exports.OPERATION || (exports.OPERATION = {}));\n         // export enum OPERATION {\n         //     // add new structure/primitive\n         //     // (128)\n         //     ADD = 128, // 10000000,\n         //     // replace structure/primitive\n         //     REPLACE = 1,// 00000001\n         //     // delete field\n         //     DELETE = 192, // 11000000\n         //     // DELETE field, followed by an ADD\n         //     DELETE_AND_ADD = 224, // 11100000\n         //     // TOUCH is used to determine hierarchy of nested Schema structures during serialization.\n         //     // touches are NOT encoded.\n         //     TOUCH = 0, // 00000000\n         //     // MapSchema Operations\n         //     CLEAR = 10,\n         // }\n\n         //\n         // Root holds all schema references by unique id\n         //\n         var Root = /** @class */ (function () {\n             function Root() {\n                 //\n                 // Relation of refId => Schema structure\n                 // For direct access of structures during decoding time.\n                 //\n                 this.refs = new Map();\n                 this.refCounts = {};\n                 this.deletedRefs = new Set();\n                 this.nextUniqueId = 0;\n             }\n             Root.prototype.getNextUniqueId = function () {\n                 return this.nextUniqueId++;\n             };\n             // for decoding\n             Root.prototype.addRef = function (refId, ref, incrementCount) {\n                 if (incrementCount === void 0) { incrementCount = true; }\n                 this.refs.set(refId, ref);\n                 if (incrementCount) {\n                     this.refCounts[refId] = (this.refCounts[refId] || 0) + 1;\n                 }\n             };\n             // for decoding\n             Root.prototype.removeRef = function (refId) {\n                 this.refCounts[refId] = this.refCounts[refId] - 1;\n                 this.deletedRefs.add(refId);\n             };\n             Root.prototype.clearRefs = function () {\n                 this.refs.clear();\n                 this.deletedRefs.clear();\n                 this.refCounts = {};\n             };\n             // for decoding\n             Root.prototype.garbageCollectDeletedRefs = function () {\n                 var _this = this;\n                 this.deletedRefs.forEach(function (refId) {\n                     if (_this.refCounts[refId] <= 0) {\n                         var ref = _this.refs.get(refId);\n                         //\n                         // Ensure child schema instances have their references removed as well.\n                         //\n                         if (ref instanceof Schema) {\n                             for (var fieldName in ref['_definition'].schema) {\n                                 if (typeof (ref['_definition'].schema[fieldName]) !== \"string\" &&\n                                     ref[fieldName] &&\n                                     ref[fieldName]['$changes']) {\n                                     _this.removeRef(ref[fieldName]['$changes'].refId);\n                                 }\n                             }\n                         }\n                         else {\n                             var definition = ref['$changes'].parent._definition;\n                             var type = definition.schema[definition.fieldsByIndex[ref['$changes'].parentIndex]];\n                             if (typeof (Object.values(type)[0]) === \"function\") {\n                                 Array.from(ref.values())\n                                     .forEach(function (child) { return _this.removeRef(child['$changes'].refId); });\n                             }\n                         }\n                         _this.refs.delete(refId);\n                         delete _this.refCounts[refId];\n                     }\n                 });\n                 // clear deleted refs.\n                 this.deletedRefs.clear();\n             };\n             return Root;\n         }());\n         var ChangeTree = /** @class */ (function () {\n             function ChangeTree(ref, parent, root) {\n                 this.changed = false;\n                 this.changes = new Map();\n                 this.allChanges = new Set();\n                 // cached indexes for filtering\n                 this.caches = {};\n                 this.currentCustomOperation = 0;\n                 this.ref = ref;\n                 this.setParent(parent, root);\n             }\n             ChangeTree.prototype.setParent = function (parent, root, parentIndex) {\n                 var _this = this;\n                 if (!this.indexes) {\n                     this.indexes = (this.ref instanceof Schema)\n                         ? this.ref['_definition'].indexes\n                         : {};\n                 }\n                 this.parent = parent;\n                 this.parentIndex = parentIndex;\n                 // avoid setting parents with empty `root`\n                 if (!root) {\n                     return;\n                 }\n                 this.root = root;\n                 //\n                 // assign same parent on child structures\n                 //\n                 if (this.ref instanceof Schema) {\n                     var definition = this.ref['_definition'];\n                     for (var field in definition.schema) {\n                         var value = this.ref[field];\n                         if (value && value['$changes']) {\n                             var parentIndex_1 = definition.indexes[field];\n                             value['$changes'].setParent(this.ref, root, parentIndex_1);\n                         }\n                     }\n                 }\n                 else if (typeof (this.ref) === \"object\") {\n                     this.ref.forEach(function (value, key) {\n                         if (value instanceof Schema) {\n                             var changeTreee = value['$changes'];\n                             var parentIndex_2 = _this.ref['$changes'].indexes[key];\n                             changeTreee.setParent(_this.ref, _this.root, parentIndex_2);\n                         }\n                     });\n                 }\n             };\n             ChangeTree.prototype.operation = function (op) {\n                 this.changes.set(--this.currentCustomOperation, op);\n             };\n             ChangeTree.prototype.change = function (fieldName, operation) {\n                 if (operation === void 0) { operation = exports.OPERATION.ADD; }\n                 var index = (typeof (fieldName) === \"number\")\n                     ? fieldName\n                     : this.indexes[fieldName];\n                 this.assertValidIndex(index, fieldName);\n                 var previousChange = this.changes.get(index);\n                 if (!previousChange ||\n                     previousChange.op === exports.OPERATION.DELETE ||\n                     previousChange.op === exports.OPERATION.TOUCH // (mazmorra.io's BattleAction issue)\n                 ) {\n                     this.changes.set(index, {\n                         op: (!previousChange)\n                             ? operation\n                             : (previousChange.op === exports.OPERATION.DELETE)\n                                 ? exports.OPERATION.DELETE_AND_ADD\n                                 : operation,\n                         // : OPERATION.REPLACE,\n                         index: index\n                     });\n                 }\n                 this.allChanges.add(index);\n                 this.changed = true;\n                 this.touchParents();\n             };\n             ChangeTree.prototype.touch = function (fieldName) {\n                 var index = (typeof (fieldName) === \"number\")\n                     ? fieldName\n                     : this.indexes[fieldName];\n                 this.assertValidIndex(index, fieldName);\n                 if (!this.changes.has(index)) {\n                     this.changes.set(index, { op: exports.OPERATION.TOUCH, index: index });\n                 }\n                 this.allChanges.add(index);\n                 // ensure touch is placed until the $root is found.\n                 this.touchParents();\n             };\n             ChangeTree.prototype.touchParents = function () {\n                 if (this.parent) {\n                     this.parent['$changes'].touch(this.parentIndex);\n                 }\n             };\n             ChangeTree.prototype.getType = function (index) {\n                 if (this.ref['_definition']) {\n                     var definition = this.ref['_definition'];\n                     return definition.schema[definition.fieldsByIndex[index]];\n                 }\n                 else {\n                     var definition = this.parent['_definition'];\n                     var parentType = definition.schema[definition.fieldsByIndex[this.parentIndex]];\n                     //\n                     // Get the child type from parent structure.\n                     // - [\"string\"] => \"string\"\n                     // - { map: \"string\" } => \"string\"\n                     // - { set: \"string\" } => \"string\"\n                     //\n                     return Object.values(parentType)[0];\n                 }\n             };\n             ChangeTree.prototype.getChildrenFilter = function () {\n                 var childFilters = this.parent['_definition'].childFilters;\n                 return childFilters && childFilters[this.parentIndex];\n             };\n             //\n             // used during `.encode()`\n             //\n             ChangeTree.prototype.getValue = function (index) {\n                 return this.ref['getByIndex'](index);\n             };\n             ChangeTree.prototype.delete = function (fieldName) {\n                 var index = (typeof (fieldName) === \"number\")\n                     ? fieldName\n                     : this.indexes[fieldName];\n                 if (index === undefined) {\n                     console.warn(\"@colyseus/schema \" + this.ref.constructor.name + \": trying to delete non-existing index: \" + fieldName + \" (\" + index + \")\");\n                     return;\n                 }\n                 var previousValue = this.getValue(index);\n                 // console.log(\"$changes.delete =>\", { fieldName, index, previousValue });\n                 this.changes.set(index, { op: exports.OPERATION.DELETE, index: index });\n                 this.allChanges.delete(index);\n                 // delete cache\n                 delete this.caches[index];\n                 // remove `root` reference\n                 if (previousValue && previousValue['$changes']) {\n                     previousValue['$changes'].parent = undefined;\n                 }\n                 this.changed = true;\n                 this.touchParents();\n             };\n             ChangeTree.prototype.discard = function (changed, discardAll) {\n                 var _this = this;\n                 if (changed === void 0) { changed = false; }\n                 if (discardAll === void 0) { discardAll = false; }\n                 //\n                 // Map, Array, etc:\n                 // Remove cached key to ensure ADD operations is unsed instead of\n                 // REPLACE in case same key is used on next patches.\n                 //\n                 // TODO: refactor this. this is not relevant for Collection and Set.\n                 //\n                 if (!(this.ref instanceof Schema)) {\n                     this.changes.forEach(function (change) {\n                         if (change.op === exports.OPERATION.DELETE) {\n                             var index = _this.ref['getIndex'](change.index);\n                             delete _this.indexes[index];\n                         }\n                     });\n                 }\n                 this.changes.clear();\n                 this.changed = changed;\n                 if (discardAll) {\n                     this.allChanges.clear();\n                 }\n                 // re-set `currentCustomOperation`\n                 this.currentCustomOperation = 0;\n             };\n             /**\n              * Recursively discard all changes from this, and child structures.\n              */\n             ChangeTree.prototype.discardAll = function () {\n                 var _this = this;\n                 this.changes.forEach(function (change) {\n                     var value = _this.getValue(change.index);\n                     if (value && value['$changes']) {\n                         value['$changes'].discardAll();\n                     }\n                 });\n                 this.discard();\n             };\n             // cache(field: number, beginIndex: number, endIndex: number) {\n             ChangeTree.prototype.cache = function (field, cachedBytes) {\n                 this.caches[field] = cachedBytes;\n             };\n             ChangeTree.prototype.clone = function () {\n                 return new ChangeTree(this.ref, this.parent, this.root);\n             };\n             ChangeTree.prototype.ensureRefId = function () {\n                 // skip if refId is already set.\n                 if (this.refId !== undefined) {\n                     return;\n                 }\n                 this.refId = this.root.getNextUniqueId();\n             };\n             ChangeTree.prototype.assertValidIndex = function (index, fieldName) {\n                 if (index === undefined) {\n                     throw new Error(\"ChangeTree: missing index for field \\\"\" + fieldName + \"\\\"\");\n                 }\n             };\n             return ChangeTree;\n         }());\n\n         //\n         // Notes:\n         // -----\n         //\n         // - The tsconfig.json of @colyseus/schema uses ES2018.\n         // - ES2019 introduces `flatMap` / `flat`, which is not currently relevant, and caused other issues.\n         //\n         var DEFAULT_SORT = function (a, b) {\n             var A = a.toString();\n             var B = b.toString();\n             if (A < B)\n                 return -1;\n             else if (A > B)\n                 return 1;\n             else\n                 return 0;\n         };\n         function getArrayProxy(value) {\n             value['$proxy'] = true;\n             //\n             // compatibility with @colyseus/schema 0.5.x\n             // - allow `map[\"key\"]`\n             // - allow `map[\"key\"] = \"xxx\"`\n             // - allow `delete map[\"key\"]`\n             //\n             value = new Proxy(value, {\n                 get: function (obj, prop) {\n                     if (typeof (prop) !== \"symbol\" &&\n                         !isNaN(prop) // https://stackoverflow.com/a/175787/892698\n                     ) {\n                         return obj.at(prop);\n                     }\n                     else {\n                         return obj[prop];\n                     }\n                 },\n                 set: function (obj, prop, setValue) {\n                     if (typeof (prop) !== \"symbol\" &&\n                         !isNaN(prop)) {\n                         var indexes = Array.from(obj['$items'].keys());\n                         var key = parseInt(indexes[prop] || prop);\n                         if (setValue === undefined || setValue === null) {\n                             obj.deleteAt(key);\n                         }\n                         else {\n                             obj.setAt(key, setValue);\n                         }\n                     }\n                     else {\n                         obj[prop] = setValue;\n                     }\n                     return true;\n                 },\n                 deleteProperty: function (obj, prop) {\n                     if (typeof (prop) === \"number\") {\n                         obj.deleteAt(prop);\n                     }\n                     else {\n                         delete obj[prop];\n                     }\n                     return true;\n                 },\n             });\n             return value;\n         }\n         var ArraySchema = /** @class */ (function () {\n             function ArraySchema() {\n                 var items = [];\n                 for (var _i = 0; _i < arguments.length; _i++) {\n                     items[_i] = arguments[_i];\n                 }\n                 this.$changes = new ChangeTree(this);\n                 this.$items = new Map();\n                 this.$indexes = new Map();\n                 this.$refId = 0;\n                 this.push.apply(this, items);\n             }\n             ArraySchema.is = function (type) {\n                 return Array.isArray(type);\n             };\n             Object.defineProperty(ArraySchema.prototype, \"length\", {\n                 get: function () {\n                     return this.$items.size;\n                 },\n                 set: function (value) {\n                     if (value === 0) {\n                         this.clear();\n                     }\n                     else {\n                         this.splice(value, this.length - value);\n                     }\n                 },\n                 enumerable: false,\n                 configurable: true\n             });\n             ArraySchema.prototype.push = function () {\n                 var _this = this;\n                 var values = [];\n                 for (var _i = 0; _i < arguments.length; _i++) {\n                     values[_i] = arguments[_i];\n                 }\n                 var lastIndex;\n                 values.forEach(function (value) {\n                     // set \"index\" for reference.\n                     lastIndex = _this.$refId++;\n                     _this.setAt(lastIndex, value);\n                 });\n                 return lastIndex;\n             };\n             /**\n              * Removes the last element from an array and returns it.\n              */\n             ArraySchema.prototype.pop = function () {\n                 var key = Array.from(this.$indexes.values()).pop();\n                 if (key === undefined) {\n                     return undefined;\n                 }\n                 this.$changes.delete(key);\n                 this.$indexes.delete(key);\n                 var value = this.$items.get(key);\n                 this.$items.delete(key);\n                 return value;\n             };\n             ArraySchema.prototype.at = function (index) {\n                 //\n                 // FIXME: this should be O(1)\n                 //\n                 var key = Array.from(this.$items.keys())[index];\n                 return this.$items.get(key);\n             };\n             ArraySchema.prototype.setAt = function (index, value) {\n                 var _a, _b;\n                 if (value['$changes'] !== undefined) {\n                     value['$changes'].setParent(this, this.$changes.root, index);\n                 }\n                 var operation = (_b = (_a = this.$changes.indexes[index]) === null || _a === void 0 ? void 0 : _a.op) !== null && _b !== void 0 ? _b : exports.OPERATION.ADD;\n                 this.$changes.indexes[index] = index;\n                 this.$indexes.set(index, index);\n                 this.$items.set(index, value);\n                 this.$changes.change(index, operation);\n             };\n             ArraySchema.prototype.deleteAt = function (index) {\n                 var key = Array.from(this.$items.keys())[index];\n                 if (key === undefined) {\n                     return false;\n                 }\n                 return this.$deleteAt(key);\n             };\n             ArraySchema.prototype.$deleteAt = function (index) {\n                 // delete at internal index\n                 this.$changes.delete(index);\n                 this.$indexes.delete(index);\n                 return this.$items.delete(index);\n             };\n             ArraySchema.prototype.clear = function (isDecoding) {\n                 var _this = this;\n                 // discard previous operations.\n                 this.$changes.discard(true, true);\n                 this.$changes.indexes = {};\n                 // clear previous indexes\n                 this.$indexes.clear();\n                 // flag child items for garbage collection.\n                 if (isDecoding && typeof (this.$changes.getType()) !== \"string\") {\n                     this.$items.forEach(function (item) {\n                         _this.$changes.root.removeRef(item['$changes'].refId);\n                     });\n                 }\n                 // clear items\n                 this.$items.clear();\n                 this.$changes.operation({ index: 0, op: exports.OPERATION.CLEAR });\n                 // touch all structures until reach root\n                 this.$changes.touchParents();\n             };\n             /**\n              * Combines two or more arrays.\n              * @param items Additional items to add to the end of array1.\n              */\n             ArraySchema.prototype.concat = function () {\n                 var _a;\n                 var items = [];\n                 for (var _i = 0; _i < arguments.length; _i++) {\n                     items[_i] = arguments[_i];\n                 }\n                 return new (ArraySchema.bind.apply(ArraySchema, __spreadArray([void 0], (_a = Array.from(this.$items.values())).concat.apply(_a, items))))();\n             };\n             /**\n              * Adds all the elements of an array separated by the specified separator string.\n              * @param separator A string used to separate one element of an array from the next in the resulting String. If omitted, the array elements are separated with a comma.\n              */\n             ArraySchema.prototype.join = function (separator) {\n                 return Array.from(this.$items.values()).join(separator);\n             };\n             /**\n              * Reverses the elements in an Array.\n              */\n             ArraySchema.prototype.reverse = function () {\n                 var _this = this;\n                 var indexes = Array.from(this.$items.keys());\n                 var reversedItems = Array.from(this.$items.values()).reverse();\n                 reversedItems.forEach(function (item, i) {\n                     _this.setAt(indexes[i], item);\n                 });\n                 return this;\n             };\n             /**\n              * Removes the first element from an array and returns it.\n              */\n             ArraySchema.prototype.shift = function () {\n                 var indexes = Array.from(this.$items.keys());\n                 var shiftAt = indexes.shift();\n                 if (shiftAt === undefined) {\n                     return undefined;\n                 }\n                 var value = this.$items.get(shiftAt);\n                 this.$deleteAt(shiftAt);\n                 return value;\n             };\n             /**\n              * Returns a section of an array.\n              * @param start The beginning of the specified portion of the array.\n              * @param end The end of the specified portion of the array. This is exclusive of the element at the index 'end'.\n              */\n             ArraySchema.prototype.slice = function (start, end) {\n                 return new (ArraySchema.bind.apply(ArraySchema, __spreadArray([void 0], Array.from(this.$items.values()).slice(start, end))))();\n             };\n             /**\n              * Sorts an array.\n              * @param compareFn Function used to determine the order of the elements. It is expected to return\n              * a negative value if first argument is less than second argument, zero if they're equal and a positive\n              * value otherwise. If omitted, the elements are sorted in ascending, ASCII character order.\n              * ```ts\n              * [11,2,22,1].sort((a, b) => a - b)\n              * ```\n              */\n             ArraySchema.prototype.sort = function (compareFn) {\n                 var _this = this;\n                 if (compareFn === void 0) { compareFn = DEFAULT_SORT; }\n                 var indexes = Array.from(this.$items.keys());\n                 var sortedItems = Array.from(this.$items.values()).sort(compareFn);\n                 sortedItems.forEach(function (item, i) {\n                     _this.setAt(indexes[i], item);\n                 });\n                 return this;\n             };\n             /**\n              * Removes elements from an array and, if necessary, inserts new elements in their place, returning the deleted elements.\n              * @param start The zero-based location in the array from which to start removing elements.\n              * @param deleteCount The number of elements to remove.\n              * @param items Elements to insert into the array in place of the deleted elements.\n              */\n             ArraySchema.prototype.splice = function (start, deleteCount) {\n                 if (deleteCount === void 0) { deleteCount = this.length - start; }\n                 var items = [];\n                 for (var _i = 2; _i < arguments.length; _i++) {\n                     items[_i - 2] = arguments[_i];\n                 }\n                 var indexes = Array.from(this.$items.keys());\n                 var removedItems = [];\n                 for (var i = start; i < start + deleteCount; i++) {\n                     removedItems.push(this.$items.get(indexes[i]));\n                     this.$deleteAt(indexes[i]);\n                 }\n                 return removedItems;\n             };\n             /**\n              * Inserts new elements at the start of an array.\n              * @param items  Elements to insert at the start of the Array.\n              */\n             ArraySchema.prototype.unshift = function () {\n                 var _this = this;\n                 var items = [];\n                 for (var _i = 0; _i < arguments.length; _i++) {\n                     items[_i] = arguments[_i];\n                 }\n                 var length = this.length;\n                 var addedLength = items.length;\n                 // const indexes = Array.from(this.$items.keys());\n                 var previousValues = Array.from(this.$items.values());\n                 items.forEach(function (item, i) {\n                     _this.setAt(i, item);\n                 });\n                 previousValues.forEach(function (previousValue, i) {\n                     _this.setAt(addedLength + i, previousValue);\n                 });\n                 return length + addedLength;\n             };\n             /**\n              * Returns the index of the first occurrence of a value in an array.\n              * @param searchElement The value to locate in the array.\n              * @param fromIndex The array index at which to begin the search. If fromIndex is omitted, the search starts at index 0.\n              */\n             ArraySchema.prototype.indexOf = function (searchElement, fromIndex) {\n                 return Array.from(this.$items.values()).indexOf(searchElement, fromIndex);\n             };\n             /**\n              * Returns the index of the last occurrence of a specified value in an array.\n              * @param searchElement The value to locate in the array.\n              * @param fromIndex The array index at which to begin the search. If fromIndex is omitted, the search starts at the last index in the array.\n              */\n             ArraySchema.prototype.lastIndexOf = function (searchElement, fromIndex) {\n                 if (fromIndex === void 0) { fromIndex = this.length - 1; }\n                 return Array.from(this.$items.values()).lastIndexOf(searchElement, fromIndex);\n             };\n             /**\n              * Determines whether all the members of an array satisfy the specified test.\n              * @param callbackfn A function that accepts up to three arguments. The every method calls\n              * the callbackfn function for each element in the array until the callbackfn returns a value\n              * which is coercible to the Boolean value false, or until the end of the array.\n              * @param thisArg An object to which the this keyword can refer in the callbackfn function.\n              * If thisArg is omitted, undefined is used as the this value.\n              */\n             ArraySchema.prototype.every = function (callbackfn, thisArg) {\n                 return Array.from(this.$items.values()).every(callbackfn, thisArg);\n             };\n             /**\n              * Determines whether the specified callback function returns true for any element of an array.\n              * @param callbackfn A function that accepts up to three arguments. The some method calls\n              * the callbackfn function for each element in the array until the callbackfn returns a value\n              * which is coercible to the Boolean value true, or until the end of the array.\n              * @param thisArg An object to which the this keyword can refer in the callbackfn function.\n              * If thisArg is omitted, undefined is used as the this value.\n              */\n             ArraySchema.prototype.some = function (callbackfn, thisArg) {\n                 return Array.from(this.$items.values()).some(callbackfn, thisArg);\n             };\n             /**\n              * Performs the specified action for each element in an array.\n              * @param callbackfn  A function that accepts up to three arguments. forEach calls the callbackfn function one time for each element in the array.\n              * @param thisArg  An object to which the this keyword can refer in the callbackfn function. If thisArg is omitted, undefined is used as the this value.\n              */\n             ArraySchema.prototype.forEach = function (callbackfn, thisArg) {\n                 Array.from(this.$items.values()).forEach(callbackfn, thisArg);\n             };\n             /**\n              * Calls a defined callback function on each element of an array, and returns an array that contains the results.\n              * @param callbackfn A function that accepts up to three arguments. The map method calls the callbackfn function one time for each element in the array.\n              * @param thisArg An object to which the this keyword can refer in the callbackfn function. If thisArg is omitted, undefined is used as the this value.\n              */\n             ArraySchema.prototype.map = function (callbackfn, thisArg) {\n                 return Array.from(this.$items.values()).map(callbackfn, thisArg);\n             };\n             ArraySchema.prototype.filter = function (callbackfn, thisArg) {\n                 return Array.from(this.$items.values()).filter(callbackfn, thisArg);\n             };\n             /**\n              * Calls the specified callback function for all the elements in an array. The return value of the callback function is the accumulated result, and is provided as an argument in the next call to the callback function.\n              * @param callbackfn A function that accepts up to four arguments. The reduce method calls the callbackfn function one time for each element in the array.\n              * @param initialValue If initialValue is specified, it is used as the initial value to start the accumulation. The first call to the callbackfn function provides this value as an argument instead of an array value.\n              */\n             ArraySchema.prototype.reduce = function (callbackfn, initialValue) {\n                 return Array.from(this.$items.values()).reduce(callbackfn, initialValue);\n             };\n             /**\n              * Calls the specified callback function for all the elements in an array, in descending order. The return value of the callback function is the accumulated result, and is provided as an argument in the next call to the callback function.\n              * @param callbackfn A function that accepts up to four arguments. The reduceRight method calls the callbackfn function one time for each element in the array.\n              * @param initialValue If initialValue is specified, it is used as the initial value to start the accumulation. The first call to the callbackfn function provides this value as an argument instead of an array value.\n              */\n             ArraySchema.prototype.reduceRight = function (callbackfn, initialValue) {\n                 return Array.from(this.$items.values()).reduceRight(callbackfn, initialValue);\n             };\n             /**\n              * Returns the value of the first element in the array where predicate is true, and undefined\n              * otherwise.\n              * @param predicate find calls predicate once for each element of the array, in ascending\n              * order, until it finds one where predicate returns true. If such an element is found, find\n              * immediately returns that element value. Otherwise, find returns undefined.\n              * @param thisArg If provided, it will be used as the this value for each invocation of\n              * predicate. If it is not provided, undefined is used instead.\n              */\n             ArraySchema.prototype.find = function (predicate, thisArg) {\n                 return Array.from(this.$items.values()).find(predicate, thisArg);\n             };\n             /**\n              * Returns the index of the first element in the array where predicate is true, and -1\n              * otherwise.\n              * @param predicate find calls predicate once for each element of the array, in ascending\n              * order, until it finds one where predicate returns true. If such an element is found,\n              * findIndex immediately returns that element index. Otherwise, findIndex returns -1.\n              * @param thisArg If provided, it will be used as the this value for each invocation of\n              * predicate. If it is not provided, undefined is used instead.\n              */\n             ArraySchema.prototype.findIndex = function (predicate, thisArg) {\n                 return Array.from(this.$items.values()).findIndex(predicate, thisArg);\n             };\n             /**\n              * Returns the this object after filling the section identified by start and end with value\n              * @param value value to fill array section with\n              * @param start index to start filling the array at. If start is negative, it is treated as\n              * length+start where length is the length of the array.\n              * @param end index to stop filling the array at. If end is negative, it is treated as\n              * length+end.\n              */\n             ArraySchema.prototype.fill = function (value, start, end) {\n                 //\n                 // TODO\n                 //\n                 throw new Error(\"ArraySchema#fill() not implemented\");\n             };\n             /**\n              * Returns the this object after copying a section of the array identified by start and end\n              * to the same array starting at position target\n              * @param target If target is negative, it is treated as length+target where length is the\n              * length of the array.\n              * @param start If start is negative, it is treated as length+start. If end is negative, it\n              * is treated as length+end.\n              * @param end If not specified, length of the this object is used as its default value.\n              */\n             ArraySchema.prototype.copyWithin = function (target, start, end) {\n                 //\n                 // TODO\n                 //\n                 throw new Error(\"ArraySchema#copyWithin() not implemented\");\n             };\n             /**\n              * Returns a string representation of an array.\n              */\n             ArraySchema.prototype.toString = function () { return this.$items.toString(); };\n             /**\n              * Returns a string representation of an array. The elements are converted to string using their toLocalString methods.\n              */\n             ArraySchema.prototype.toLocaleString = function () { return this.$items.toLocaleString(); };\n             /** Iterator */\n             ArraySchema.prototype[Symbol.iterator] = function () {\n                 return Array.from(this.$items.values())[Symbol.iterator]();\n             };\n             ArraySchema.prototype[Symbol.unscopables] = function () {\n                 return this.$items[Symbol.unscopables]();\n             };\n             /**\n              * Returns an iterable of key, value pairs for every entry in the array\n              */\n             ArraySchema.prototype.entries = function () { return this.$items.entries(); };\n             /**\n              * Returns an iterable of keys in the array\n              */\n             ArraySchema.prototype.keys = function () { return this.$items.keys(); };\n             /**\n              * Returns an iterable of values in the array\n              */\n             ArraySchema.prototype.values = function () { return this.$items.values(); };\n             /**\n              * Determines whether an array includes a certain element, returning true or false as appropriate.\n              * @param searchElement The element to search for.\n              * @param fromIndex The position in this array at which to begin searching for searchElement.\n              */\n             ArraySchema.prototype.includes = function (searchElement, fromIndex) {\n                 return Array.from(this.$items.values()).includes(searchElement, fromIndex);\n             };\n             /**\n              * Calls a defined callback function on each element of an array. Then, flattens the result into\n              * a new array.\n              * This is identical to a map followed by flat with depth 1.\n              *\n              * @param callback A function that accepts up to three arguments. The flatMap method calls the\n              * callback function one time for each element in the array.\n              * @param thisArg An object to which the this keyword can refer in the callback function. If\n              * thisArg is omitted, undefined is used as the this value.\n              */\n             // @ts-ignore\n             ArraySchema.prototype.flatMap = function (callback, thisArg) {\n                 // @ts-ignore\n                 throw new Error(\"ArraySchema#flatMap() is not supported.\");\n             };\n             /**\n              * Returns a new array with all sub-array elements concatenated into it recursively up to the\n              * specified depth.\n              *\n              * @param depth The maximum recursion depth\n              */\n             // @ts-ignore\n             ArraySchema.prototype.flat = function (depth) {\n                 // @ts-ignore\n                 throw new Error(\"ArraySchema#flat() is not supported.\");\n             };\n             // get size () {\n             //     return this.$items.size;\n             // }\n             ArraySchema.prototype.setIndex = function (index, key) {\n                 this.$indexes.set(index, key);\n             };\n             ArraySchema.prototype.getIndex = function (index) {\n                 return this.$indexes.get(index);\n             };\n             ArraySchema.prototype.getByIndex = function (index) {\n                 return this.$items.get(this.$indexes.get(index));\n             };\n             ArraySchema.prototype.deleteByIndex = function (index) {\n                 var key = this.$indexes.get(index);\n                 this.$items.delete(key);\n                 this.$indexes.delete(index);\n             };\n             ArraySchema.prototype.toArray = function () {\n                 return Array.from(this.$items.values());\n             };\n             ArraySchema.prototype.toJSON = function () {\n                 return this.toArray().map(function (value) {\n                     return (typeof (value['toJSON']) === \"function\")\n                         ? value['toJSON']()\n                         : value;\n                 });\n             };\n             //\n             // Decoding utilities\n             //\n             ArraySchema.prototype.clone = function (isDecoding) {\n                 var cloned;\n                 if (isDecoding) {\n                     cloned = new (ArraySchema.bind.apply(ArraySchema, __spreadArray([void 0], Array.from(this.$items.values()))))();\n                 }\n                 else {\n                     cloned = new (ArraySchema.bind.apply(ArraySchema, __spreadArray([void 0], this.map(function (item) { return ((item['$changes'])\n                         ? item.clone()\n                         : item); }))))();\n                 }\n                 return cloned;\n             };\n             ArraySchema.prototype.triggerAll = function () {\n                 Schema.prototype.triggerAll.apply(this);\n             };\n             return ArraySchema;\n         }());\n\n         function getMapProxy(value) {\n             value['$proxy'] = true;\n             value = new Proxy(value, {\n                 get: function (obj, prop) {\n                     if (typeof (prop) !== \"symbol\" && // accessing properties\n                         typeof (obj[prop]) === \"undefined\") {\n                         return obj.get(prop);\n                     }\n                     else {\n                         return obj[prop];\n                     }\n                 },\n                 set: function (obj, prop, setValue) {\n                     if (typeof (prop) !== \"symbol\" &&\n                         (prop.indexOf(\"$\") === -1 &&\n                             prop !== \"onAdd\" &&\n                             prop !== \"onRemove\" &&\n                             prop !== \"onChange\")) {\n                         obj.set(prop, setValue);\n                     }\n                     else {\n                         obj[prop] = setValue;\n                     }\n                     return true;\n                 },\n                 deleteProperty: function (obj, prop) {\n                     obj.delete(prop);\n                     return true;\n                 },\n             });\n             return value;\n         }\n         var MapSchema = /** @class */ (function () {\n             function MapSchema(initialValues) {\n                 var _this = this;\n                 this.$changes = new ChangeTree(this);\n                 this.$items = new Map();\n                 this.$indexes = new Map();\n                 this.$refId = 0;\n                 if (initialValues) {\n                     if (initialValues instanceof Map) {\n                         initialValues.forEach(function (v, k) { return _this.set(k, v); });\n                     }\n                     else {\n                         for (var k in initialValues) {\n                             this.set(k, initialValues[k]);\n                         }\n                     }\n                 }\n             }\n             MapSchema.is = function (type) {\n                 return type['map'] !== undefined;\n             };\n             /** Iterator */\n             MapSchema.prototype[Symbol.iterator] = function () { return this.$items[Symbol.iterator](); };\n             Object.defineProperty(MapSchema.prototype, Symbol.toStringTag, {\n                 get: function () { return this.$items[Symbol.toStringTag]; },\n                 enumerable: false,\n                 configurable: true\n             });\n             MapSchema.prototype.set = function (key, value) {\n                 // get \"index\" for this value.\n                 var hasIndex = typeof (this.$changes.indexes[key]) !== \"undefined\";\n                 var index = (hasIndex)\n                     ? this.$changes.indexes[key]\n                     : this.$refId++;\n                 var operation = (hasIndex)\n                     ? exports.OPERATION.REPLACE\n                     : exports.OPERATION.ADD;\n                 var isRef = (value['$changes']) !== undefined;\n                 if (isRef) {\n                     value['$changes'].setParent(this, this.$changes.root, index);\n                 }\n                 //\n                 // (encoding)\n                 // set a unique id to relate directly with this key/value.\n                 //\n                 if (!hasIndex) {\n                     this.$changes.indexes[key] = index;\n                     this.$indexes.set(index, key);\n                 }\n                 else if (isRef && // if is schema, force ADD operation if value differ from previous one.\n                     this.$items.get(key) !== value) {\n                     operation = exports.OPERATION.ADD;\n                 }\n                 this.$items.set(key, value);\n                 this.$changes.change(key, operation);\n                 return this;\n             };\n             MapSchema.prototype.get = function (key) {\n                 return this.$items.get(key);\n             };\n             MapSchema.prototype.delete = function (key) {\n                 //\n                 // TODO: add a \"purge\" method after .encode() runs, to cleanup removed `$indexes`\n                 //\n                 // We don't remove $indexes to allow setting the same key in the same patch\n                 // (See \"should allow to remove and set an item in the same place\" test)\n                 //\n                 // // const index = this.$changes.indexes[key];\n                 // // this.$indexes.delete(index);\n                 this.$changes.delete(key);\n                 return this.$items.delete(key);\n             };\n             MapSchema.prototype.clear = function (isDecoding) {\n                 var _this = this;\n                 // discard previous operations.\n                 this.$changes.discard(true, true);\n                 this.$changes.indexes = {};\n                 // clear previous indexes\n                 this.$indexes.clear();\n                 // flag child items for garbage collection.\n                 if (isDecoding && typeof (this.$changes.getType()) !== \"string\") {\n                     this.$items.forEach(function (item) {\n                         _this.$changes.root.removeRef(item['$changes'].refId);\n                     });\n                 }\n                 // clear items\n                 this.$items.clear();\n                 this.$changes.operation({ index: 0, op: exports.OPERATION.CLEAR });\n                 // touch all structures until reach root\n                 this.$changes.touchParents();\n             };\n             MapSchema.prototype.has = function (key) {\n                 return this.$items.has(key);\n             };\n             MapSchema.prototype.forEach = function (callbackfn) {\n                 this.$items.forEach(callbackfn);\n             };\n             MapSchema.prototype.entries = function () {\n                 return this.$items.entries();\n             };\n             MapSchema.prototype.keys = function () {\n                 return this.$items.keys();\n             };\n             MapSchema.prototype.values = function () {\n                 return this.$items.values();\n             };\n             Object.defineProperty(MapSchema.prototype, \"size\", {\n                 get: function () {\n                     return this.$items.size;\n                 },\n                 enumerable: false,\n                 configurable: true\n             });\n             MapSchema.prototype.setIndex = function (index, key) {\n                 this.$indexes.set(index, key);\n             };\n             MapSchema.prototype.getIndex = function (index) {\n                 return this.$indexes.get(index);\n             };\n             MapSchema.prototype.getByIndex = function (index) {\n                 return this.$items.get(this.$indexes.get(index));\n             };\n             MapSchema.prototype.deleteByIndex = function (index) {\n                 var key = this.$indexes.get(index);\n                 this.$items.delete(key);\n                 this.$indexes.delete(index);\n             };\n             MapSchema.prototype.toJSON = function () {\n                 var map = {};\n                 this.forEach(function (value, key) {\n                     map[key] = (typeof (value['toJSON']) === \"function\")\n                         ? value['toJSON']()\n                         : value;\n                 });\n                 return map;\n             };\n             //\n             // Decoding utilities\n             //\n             MapSchema.prototype.clone = function (isDecoding) {\n                 var cloned;\n                 if (isDecoding) {\n                     // client-side\n                     cloned = Object.assign(new MapSchema(), this);\n                 }\n                 else {\n                     // server-side\n                     cloned = new MapSchema();\n                     this.forEach(function (value, key) {\n                         if (value['$changes']) {\n                             cloned.set(key, value['clone']());\n                         }\n                         else {\n                             cloned.set(key, value);\n                         }\n                     });\n                 }\n                 return cloned;\n             };\n             MapSchema.prototype.triggerAll = function () {\n                 Schema.prototype.triggerAll.apply(this);\n             };\n             return MapSchema;\n         }());\n\n         var registeredTypes = {};\n         function registerType(identifier, definition) {\n             registeredTypes[identifier] = definition;\n         }\n         function getType(identifier) {\n             return registeredTypes[identifier];\n         }\n\n         var SchemaDefinition = /** @class */ (function () {\n             function SchemaDefinition() {\n                 //\n                 // TODO: use a \"field\" structure combining all these properties per-field.\n                 //\n                 this.indexes = {};\n                 this.fieldsByIndex = {};\n                 this.deprecated = {};\n                 this.descriptors = {};\n             }\n             SchemaDefinition.create = function (parent) {\n                 var definition = new SchemaDefinition();\n                 // support inheritance\n                 definition.schema = Object.assign({}, parent && parent.schema || {});\n                 definition.indexes = Object.assign({}, parent && parent.indexes || {});\n                 definition.fieldsByIndex = Object.assign({}, parent && parent.fieldsByIndex || {});\n                 definition.descriptors = Object.assign({}, parent && parent.descriptors || {});\n                 definition.deprecated = Object.assign({}, parent && parent.deprecated || {});\n                 return definition;\n             };\n             SchemaDefinition.prototype.addField = function (field, type) {\n                 var index = this.getNextFieldIndex();\n                 this.fieldsByIndex[index] = field;\n                 this.indexes[field] = index;\n                 this.schema[field] = (Array.isArray(type))\n                     ? { array: type[0] }\n                     : type;\n             };\n             SchemaDefinition.prototype.addFilter = function (field, cb) {\n                 if (!this.filters) {\n                     this.filters = {};\n                     this.indexesWithFilters = [];\n                 }\n                 this.filters[this.indexes[field]] = cb;\n                 this.indexesWithFilters.push(this.indexes[field]);\n                 return true;\n             };\n             SchemaDefinition.prototype.addChildrenFilter = function (field, cb) {\n                 var index = this.indexes[field];\n                 var type = this.schema[field];\n                 if (getType(Object.keys(type)[0])) {\n                     if (!this.childFilters) {\n                         this.childFilters = {};\n                     }\n                     this.childFilters[index] = cb;\n                     return true;\n                 }\n                 else {\n                     console.warn(\"@filterChildren: field '\" + field + \"' can't have children. Ignoring filter.\");\n                 }\n             };\n             SchemaDefinition.prototype.getChildrenFilter = function (field) {\n                 return this.childFilters && this.childFilters[this.indexes[field]];\n             };\n             SchemaDefinition.prototype.getNextFieldIndex = function () {\n                 return Object.keys(this.schema || {}).length;\n             };\n             return SchemaDefinition;\n         }());\n         function hasFilter(klass) {\n             return klass._context && klass._context.useFilters;\n         }\n         var Context = /** @class */ (function () {\n             function Context() {\n                 this.types = {};\n                 this.schemas = new Map();\n                 this.useFilters = false;\n             }\n             Context.prototype.has = function (schema) {\n                 return this.schemas.has(schema);\n             };\n             Context.prototype.get = function (typeid) {\n                 return this.types[typeid];\n             };\n             Context.prototype.add = function (schema, typeid) {\n                 if (typeid === void 0) { typeid = this.schemas.size; }\n                 // FIXME: move this to somewhere else?\n                 // support inheritance\n                 schema._definition = SchemaDefinition.create(schema._definition);\n                 schema._typeid = typeid;\n                 this.types[typeid] = schema;\n                 this.schemas.set(schema, typeid);\n             };\n             Context.create = function (context) {\n                 if (context === void 0) { context = new Context; }\n                 return function (definition) {\n                     return type(definition, context);\n                 };\n             };\n             return Context;\n         }());\n         var globalContext = new Context();\n         /**\n          * `@type()` decorator for proxies\n          */\n         function type(type, context) {\n             if (context === void 0) { context = globalContext; }\n             return function (target, field) {\n                 var constructor = target.constructor;\n                 constructor._context = context;\n                 /*\n                  * static schema\n                  */\n                 if (!context.has(constructor)) {\n                     context.add(constructor);\n                 }\n                 var definition = constructor._definition;\n                 definition.addField(field, type);\n                 /**\n                  * skip if descriptor already exists for this field (`@deprecated()`)\n                  */\n                 if (definition.descriptors[field]) {\n                     if (definition.deprecated[field]) {\n                         // do not create accessors for deprecated properties.\n                         return;\n                     }\n                     else {\n                         // trying to define same property multiple times across inheritance.\n                         // https://github.com/colyseus/colyseus-unity3d/issues/131#issuecomment-814308572\n                         try {\n                             throw new Error(\"@colyseus/schema: Duplicate '\" + field + \"' definition on '\" + constructor.name + \"'.\\nCheck @type() annotation\");\n                         }\n                         catch (e) {\n                             var definitionAtLine = e.stack.split(\"\\n\")[4].trim();\n                             throw new Error(e.message + \" \" + definitionAtLine);\n                         }\n                     }\n                 }\n                 var isArray = ArraySchema.is(type);\n                 var isMap = !isArray && MapSchema.is(type);\n                 // TODO: refactor me.\n                 // Allow abstract intermediary classes with no fields to be serialized\n                 // (See \"should support an inheritance with a Schema type without fields\" test)\n                 if (typeof (type) !== \"string\" && !Schema.is(type)) {\n                     var childType = Object.values(type)[0];\n                     if (typeof (childType) !== \"string\" && !context.has(childType)) {\n                         context.add(childType);\n                     }\n                 }\n                 var fieldCached = \"_\" + field;\n                 definition.descriptors[fieldCached] = {\n                     enumerable: false,\n                     configurable: false,\n                     writable: true,\n                 };\n                 definition.descriptors[field] = {\n                     get: function () {\n                         return this[fieldCached];\n                     },\n                     set: function (value) {\n                         /**\n                          * Create Proxy for array or map items\n                          */\n                         // skip if value is the same as cached.\n                         if (value === this[fieldCached]) {\n                             return;\n                         }\n                         if (value !== undefined &&\n                             value !== null) {\n                             // automaticallty transform Array into ArraySchema\n                             if (isArray && !(value instanceof ArraySchema)) {\n                                 value = new (ArraySchema.bind.apply(ArraySchema, __spreadArray([void 0], value)))();\n                             }\n                             // automaticallty transform Map into MapSchema\n                             if (isMap && !(value instanceof MapSchema)) {\n                                 value = new MapSchema(value);\n                             }\n                             // try to turn provided structure into a Proxy\n                             if (value['$proxy'] === undefined) {\n                                 if (isMap) {\n                                     value = getMapProxy(value);\n                                 }\n                                 else if (isArray) {\n                                     value = getArrayProxy(value);\n                                 }\n                             }\n                             // flag the change for encoding.\n                             this.$changes.change(field);\n                             //\n                             // call setParent() recursively for this and its child\n                             // structures.\n                             //\n                             if (value['$changes']) {\n                                 value['$changes'].setParent(this, this.$changes.root, this._definition.indexes[field]);\n                             }\n                         }\n                         else {\n                             //\n                             // Setting a field to `null` or `undefined` will delete it.\n                             //\n                             this.$changes.delete(field);\n                         }\n                         this[fieldCached] = value;\n                     },\n                     enumerable: true,\n                     configurable: true\n                 };\n             };\n         }\n         /**\n          * `@filter()` decorator for defining data filters per client\n          */\n         function filter(cb) {\n             return function (target, field) {\n                 var constructor = target.constructor;\n                 var definition = constructor._definition;\n                 if (definition.addFilter(field, cb)) {\n                     constructor._context.useFilters = true;\n                 }\n             };\n         }\n         function filterChildren(cb) {\n             return function (target, field) {\n                 var constructor = target.constructor;\n                 var definition = constructor._definition;\n                 if (definition.addChildrenFilter(field, cb)) {\n                     constructor._context.useFilters = true;\n                 }\n             };\n         }\n         /**\n          * `@deprecated()` flag a field as deprecated.\n          * The previous `@type()` annotation should remain along with this one.\n          */\n         function deprecated(throws, context) {\n             if (throws === void 0) { throws = true; }\n             return function (target, field) {\n                 var constructor = target.constructor;\n                 var definition = constructor._definition;\n                 definition.deprecated[field] = true;\n                 if (throws) {\n                     definition.descriptors[field] = {\n                         get: function () { throw new Error(field + \" is deprecated.\"); },\n                         set: function (value) { },\n                         enumerable: false,\n                         configurable: true\n                     };\n                 }\n             };\n         }\n         function defineTypes(target, fields, context) {\n             if (context === void 0) { context = target._context || globalContext; }\n             for (var field in fields) {\n                 type(fields[field], context)(target.prototype, field);\n             }\n             return target;\n         }\n\n         /**\n          * Copyright (c) 2018 Endel Dreyer\n          * Copyright (c) 2014 Ion Drive Software Ltd.\n          *\n          * Permission is hereby granted, free of charge, to any person obtaining a copy\n          * of this software and associated documentation files (the \"Software\"), to deal\n          * in the Software without restriction, including without limitation the rights\n          * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n          * copies of the Software, and to permit persons to whom the Software is\n          * furnished to do so, subject to the following conditions:\n          *\n          * The above copyright notice and this permission notice shall be included in all\n          * copies or substantial portions of the Software.\n          *\n          * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n          * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n          * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n          * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n          * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n          * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n          * SOFTWARE\n          */\n         /**\n          * msgpack implementation highly based on notepack.io\n          * https://github.com/darrachequesne/notepack\n          */\n         function utf8Length(str) {\n             var c = 0, length = 0;\n             for (var i = 0, l = str.length; i < l; i++) {\n                 c = str.charCodeAt(i);\n                 if (c < 0x80) {\n                     length += 1;\n                 }\n                 else if (c < 0x800) {\n                     length += 2;\n                 }\n                 else if (c < 0xd800 || c >= 0xe000) {\n                     length += 3;\n                 }\n                 else {\n                     i++;\n                     length += 4;\n                 }\n             }\n             return length;\n         }\n         function utf8Write(view, offset, str) {\n             var c = 0;\n             for (var i = 0, l = str.length; i < l; i++) {\n                 c = str.charCodeAt(i);\n                 if (c < 0x80) {\n                     view[offset++] = c;\n                 }\n                 else if (c < 0x800) {\n                     view[offset++] = 0xc0 | (c >> 6);\n                     view[offset++] = 0x80 | (c & 0x3f);\n                 }\n                 else if (c < 0xd800 || c >= 0xe000) {\n                     view[offset++] = 0xe0 | (c >> 12);\n                     view[offset++] = 0x80 | (c >> 6 & 0x3f);\n                     view[offset++] = 0x80 | (c & 0x3f);\n                 }\n                 else {\n                     i++;\n                     c = 0x10000 + (((c & 0x3ff) << 10) | (str.charCodeAt(i) & 0x3ff));\n                     view[offset++] = 0xf0 | (c >> 18);\n                     view[offset++] = 0x80 | (c >> 12 & 0x3f);\n                     view[offset++] = 0x80 | (c >> 6 & 0x3f);\n                     view[offset++] = 0x80 | (c & 0x3f);\n                 }\n             }\n         }\n         function int8$1(bytes, value) {\n             bytes.push(value & 255);\n         }\n         function uint8$1(bytes, value) {\n             bytes.push(value & 255);\n         }\n         function int16$1(bytes, value) {\n             bytes.push(value & 255);\n             bytes.push((value >> 8) & 255);\n         }\n         function uint16$1(bytes, value) {\n             bytes.push(value & 255);\n             bytes.push((value >> 8) & 255);\n         }\n         function int32$1(bytes, value) {\n             bytes.push(value & 255);\n             bytes.push((value >> 8) & 255);\n             bytes.push((value >> 16) & 255);\n             bytes.push((value >> 24) & 255);\n         }\n         function uint32$1(bytes, value) {\n             var b4 = value >> 24;\n             var b3 = value >> 16;\n             var b2 = value >> 8;\n             var b1 = value;\n             bytes.push(b1 & 255);\n             bytes.push(b2 & 255);\n             bytes.push(b3 & 255);\n             bytes.push(b4 & 255);\n         }\n         function int64$1(bytes, value) {\n             var high = Math.floor(value / Math.pow(2, 32));\n             var low = value >>> 0;\n             uint32$1(bytes, low);\n             uint32$1(bytes, high);\n         }\n         function uint64$1(bytes, value) {\n             var high = (value / Math.pow(2, 32)) >> 0;\n             var low = value >>> 0;\n             uint32$1(bytes, low);\n             uint32$1(bytes, high);\n         }\n         function float32$1(bytes, value) {\n             writeFloat32(bytes, value);\n         }\n         function float64$1(bytes, value) {\n             writeFloat64(bytes, value);\n         }\n         var _int32$1 = new Int32Array(2);\n         var _float32$1 = new Float32Array(_int32$1.buffer);\n         var _float64$1 = new Float64Array(_int32$1.buffer);\n         function writeFloat32(bytes, value) {\n             _float32$1[0] = value;\n             int32$1(bytes, _int32$1[0]);\n         }\n         function writeFloat64(bytes, value) {\n             _float64$1[0] = value;\n             int32$1(bytes, _int32$1[0 ]);\n             int32$1(bytes, _int32$1[1 ]);\n         }\n         function boolean$1(bytes, value) {\n             return uint8$1(bytes, value ? 1 : 0);\n         }\n         function string$1(bytes, value) {\n             // encode `null` strings as empty.\n             if (!value) {\n                 value = \"\";\n             }\n             var length = utf8Length(value);\n             var size = 0;\n             // fixstr\n             if (length < 0x20) {\n                 bytes.push(length | 0xa0);\n                 size = 1;\n             }\n             // str 8\n             else if (length < 0x100) {\n                 bytes.push(0xd9);\n                 uint8$1(bytes, length);\n                 size = 2;\n             }\n             // str 16\n             else if (length < 0x10000) {\n                 bytes.push(0xda);\n                 uint16$1(bytes, length);\n                 size = 3;\n             }\n             // str 32\n             else if (length < 0x100000000) {\n                 bytes.push(0xdb);\n                 uint32$1(bytes, length);\n                 size = 5;\n             }\n             else {\n                 throw new Error('String too long');\n             }\n             utf8Write(bytes, bytes.length, value);\n             return size + length;\n         }\n         function number$1(bytes, value) {\n             if (isNaN(value)) {\n                 return number$1(bytes, 0);\n             }\n             else if (!isFinite(value)) {\n                 return number$1(bytes, (value > 0) ? Number.MAX_SAFE_INTEGER : -Number.MAX_SAFE_INTEGER);\n             }\n             else if (value !== (value | 0)) {\n                 bytes.push(0xcb);\n                 writeFloat64(bytes, value);\n                 return 9;\n                 // TODO: encode float 32?\n                 // is it possible to differentiate between float32 / float64 here?\n                 // // float 32\n                 // bytes.push(0xca);\n                 // writeFloat32(bytes, value);\n                 // return 5;\n             }\n             if (value >= 0) {\n                 // positive fixnum\n                 if (value < 0x80) {\n                     uint8$1(bytes, value);\n                     return 1;\n                 }\n                 // uint 8\n                 if (value < 0x100) {\n                     bytes.push(0xcc);\n                     uint8$1(bytes, value);\n                     return 2;\n                 }\n                 // uint 16\n                 if (value < 0x10000) {\n                     bytes.push(0xcd);\n                     uint16$1(bytes, value);\n                     return 3;\n                 }\n                 // uint 32\n                 if (value < 0x100000000) {\n                     bytes.push(0xce);\n                     uint32$1(bytes, value);\n                     return 5;\n                 }\n                 // uint 64\n                 bytes.push(0xcf);\n                 uint64$1(bytes, value);\n                 return 9;\n             }\n             else {\n                 // negative fixnum\n                 if (value >= -0x20) {\n                     bytes.push(0xe0 | (value + 0x20));\n                     return 1;\n                 }\n                 // int 8\n                 if (value >= -0x80) {\n                     bytes.push(0xd0);\n                     int8$1(bytes, value);\n                     return 2;\n                 }\n                 // int 16\n                 if (value >= -0x8000) {\n                     bytes.push(0xd1);\n                     int16$1(bytes, value);\n                     return 3;\n                 }\n                 // int 32\n                 if (value >= -0x80000000) {\n                     bytes.push(0xd2);\n                     int32$1(bytes, value);\n                     return 5;\n                 }\n                 // int 64\n                 bytes.push(0xd3);\n                 int64$1(bytes, value);\n                 return 9;\n             }\n         }\n\n         var encode = /*#__PURE__*/Object.freeze({\n             __proto__: null,\n             utf8Write: utf8Write,\n             int8: int8$1,\n             uint8: uint8$1,\n             int16: int16$1,\n             uint16: uint16$1,\n             int32: int32$1,\n             uint32: uint32$1,\n             int64: int64$1,\n             uint64: uint64$1,\n             float32: float32$1,\n             float64: float64$1,\n             writeFloat32: writeFloat32,\n             writeFloat64: writeFloat64,\n             boolean: boolean$1,\n             string: string$1,\n             number: number$1\n         });\n\n         /**\n          * Copyright (c) 2018 Endel Dreyer\n          * Copyright (c) 2014 Ion Drive Software Ltd.\n          *\n          * Permission is hereby granted, free of charge, to any person obtaining a copy\n          * of this software and associated documentation files (the \"Software\"), to deal\n          * in the Software without restriction, including without limitation the rights\n          * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n          * copies of the Software, and to permit persons to whom the Software is\n          * furnished to do so, subject to the following conditions:\n          *\n          * The above copyright notice and this permission notice shall be included in all\n          * copies or substantial portions of the Software.\n          *\n          * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n          * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n          * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n          * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n          * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n          * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n          * SOFTWARE\n          */\n         function utf8Read(bytes, offset, length) {\n             var string = '', chr = 0;\n             for (var i = offset, end = offset + length; i < end; i++) {\n                 var byte = bytes[i];\n                 if ((byte & 0x80) === 0x00) {\n                     string += String.fromCharCode(byte);\n                     continue;\n                 }\n                 if ((byte & 0xe0) === 0xc0) {\n                     string += String.fromCharCode(((byte & 0x1f) << 6) |\n                         (bytes[++i] & 0x3f));\n                     continue;\n                 }\n                 if ((byte & 0xf0) === 0xe0) {\n                     string += String.fromCharCode(((byte & 0x0f) << 12) |\n                         ((bytes[++i] & 0x3f) << 6) |\n                         ((bytes[++i] & 0x3f) << 0));\n                     continue;\n                 }\n                 if ((byte & 0xf8) === 0xf0) {\n                     chr = ((byte & 0x07) << 18) |\n                         ((bytes[++i] & 0x3f) << 12) |\n                         ((bytes[++i] & 0x3f) << 6) |\n                         ((bytes[++i] & 0x3f) << 0);\n                     if (chr >= 0x010000) { // surrogate pair\n                         chr -= 0x010000;\n                         string += String.fromCharCode((chr >>> 10) + 0xD800, (chr & 0x3FF) + 0xDC00);\n                     }\n                     else {\n                         string += String.fromCharCode(chr);\n                     }\n                     continue;\n                 }\n                 console.error('Invalid byte ' + byte.toString(16));\n                 // (do not throw error to avoid server/client from crashing due to hack attemps)\n                 // throw new Error('Invalid byte ' + byte.toString(16));\n             }\n             return string;\n         }\n         function int8(bytes, it) {\n             return uint8(bytes, it) << 24 >> 24;\n         }\n         function uint8(bytes, it) {\n             return bytes[it.offset++];\n         }\n         function int16(bytes, it) {\n             return uint16(bytes, it) << 16 >> 16;\n         }\n         function uint16(bytes, it) {\n             return bytes[it.offset++] | bytes[it.offset++] << 8;\n         }\n         function int32(bytes, it) {\n             return bytes[it.offset++] | bytes[it.offset++] << 8 | bytes[it.offset++] << 16 | bytes[it.offset++] << 24;\n         }\n         function uint32(bytes, it) {\n             return int32(bytes, it) >>> 0;\n         }\n         function float32(bytes, it) {\n             return readFloat32(bytes, it);\n         }\n         function float64(bytes, it) {\n             return readFloat64(bytes, it);\n         }\n         function int64(bytes, it) {\n             var low = uint32(bytes, it);\n             var high = int32(bytes, it) * Math.pow(2, 32);\n             return high + low;\n         }\n         function uint64(bytes, it) {\n             var low = uint32(bytes, it);\n             var high = uint32(bytes, it) * Math.pow(2, 32);\n             return high + low;\n         }\n         var _int32 = new Int32Array(2);\n         var _float32 = new Float32Array(_int32.buffer);\n         var _float64 = new Float64Array(_int32.buffer);\n         function readFloat32(bytes, it) {\n             _int32[0] = int32(bytes, it);\n             return _float32[0];\n         }\n         function readFloat64(bytes, it) {\n             _int32[0 ] = int32(bytes, it);\n             _int32[1 ] = int32(bytes, it);\n             return _float64[0];\n         }\n         function boolean(bytes, it) {\n             return uint8(bytes, it) > 0;\n         }\n         function string(bytes, it) {\n             var prefix = bytes[it.offset++];\n             var length;\n             if (prefix < 0xc0) {\n                 // fixstr\n                 length = prefix & 0x1f;\n             }\n             else if (prefix === 0xd9) {\n                 length = uint8(bytes, it);\n             }\n             else if (prefix === 0xda) {\n                 length = uint16(bytes, it);\n             }\n             else if (prefix === 0xdb) {\n                 length = uint32(bytes, it);\n             }\n             var value = utf8Read(bytes, it.offset, length);\n             it.offset += length;\n             return value;\n         }\n         function stringCheck(bytes, it) {\n             var prefix = bytes[it.offset];\n             return (\n             // fixstr\n             (prefix < 0xc0 && prefix > 0xa0) ||\n                 // str 8\n                 prefix === 0xd9 ||\n                 // str 16\n                 prefix === 0xda ||\n                 // str 32\n                 prefix === 0xdb);\n         }\n         function number(bytes, it) {\n             var prefix = bytes[it.offset++];\n             if (prefix < 0x80) {\n                 // positive fixint\n                 return prefix;\n             }\n             else if (prefix === 0xca) {\n                 // float 32\n                 return readFloat32(bytes, it);\n             }\n             else if (prefix === 0xcb) {\n                 // float 64\n                 return readFloat64(bytes, it);\n             }\n             else if (prefix === 0xcc) {\n                 // uint 8\n                 return uint8(bytes, it);\n             }\n             else if (prefix === 0xcd) {\n                 // uint 16\n                 return uint16(bytes, it);\n             }\n             else if (prefix === 0xce) {\n                 // uint 32\n                 return uint32(bytes, it);\n             }\n             else if (prefix === 0xcf) {\n                 // uint 64\n                 return uint64(bytes, it);\n             }\n             else if (prefix === 0xd0) {\n                 // int 8\n                 return int8(bytes, it);\n             }\n             else if (prefix === 0xd1) {\n                 // int 16\n                 return int16(bytes, it);\n             }\n             else if (prefix === 0xd2) {\n                 // int 32\n                 return int32(bytes, it);\n             }\n             else if (prefix === 0xd3) {\n                 // int 64\n                 return int64(bytes, it);\n             }\n             else if (prefix > 0xdf) {\n                 // negative fixint\n                 return (0xff - prefix + 1) * -1;\n             }\n         }\n         function numberCheck(bytes, it) {\n             var prefix = bytes[it.offset];\n             // positive fixint - 0x00 - 0x7f\n             // float 32        - 0xca\n             // float 64        - 0xcb\n             // uint 8          - 0xcc\n             // uint 16         - 0xcd\n             // uint 32         - 0xce\n             // uint 64         - 0xcf\n             // int 8           - 0xd0\n             // int 16          - 0xd1\n             // int 32          - 0xd2\n             // int 64          - 0xd3\n             return (prefix < 0x80 ||\n                 (prefix >= 0xca && prefix <= 0xd3));\n         }\n         function arrayCheck(bytes, it) {\n             return bytes[it.offset] < 0xa0;\n             // const prefix = bytes[it.offset] ;\n             // if (prefix < 0xa0) {\n             //   return prefix;\n             // // array\n             // } else if (prefix === 0xdc) {\n             //   it.offset += 2;\n             // } else if (0xdd) {\n             //   it.offset += 4;\n             // }\n             // return prefix;\n         }\n         function switchStructureCheck(bytes, it) {\n             return (\n             // previous byte should be `SWITCH_TO_STRUCTURE`\n             bytes[it.offset - 1] === SWITCH_TO_STRUCTURE &&\n                 // next byte should be a number\n                 (bytes[it.offset] < 0x80 || (bytes[it.offset] >= 0xca && bytes[it.offset] <= 0xd3)));\n         }\n\n         var decode = /*#__PURE__*/Object.freeze({\n             __proto__: null,\n             int8: int8,\n             uint8: uint8,\n             int16: int16,\n             uint16: uint16,\n             int32: int32,\n             uint32: uint32,\n             float32: float32,\n             float64: float64,\n             int64: int64,\n             uint64: uint64,\n             readFloat32: readFloat32,\n             readFloat64: readFloat64,\n             boolean: boolean,\n             string: string,\n             stringCheck: stringCheck,\n             number: number,\n             numberCheck: numberCheck,\n             arrayCheck: arrayCheck,\n             switchStructureCheck: switchStructureCheck\n         });\n\n         var CollectionSchema = /** @class */ (function () {\n             function CollectionSchema(initialValues) {\n                 var _this = this;\n                 this.$changes = new ChangeTree(this);\n                 this.$items = new Map();\n                 this.$indexes = new Map();\n                 this.$refId = 0;\n                 if (initialValues) {\n                     initialValues.forEach(function (v) { return _this.add(v); });\n                 }\n             }\n             CollectionSchema.is = function (type) {\n                 return type['collection'] !== undefined;\n             };\n             CollectionSchema.prototype.add = function (value) {\n                 // set \"index\" for reference.\n                 var index = this.$refId++;\n                 var isRef = (value['$changes']) !== undefined;\n                 if (isRef) {\n                     value['$changes'].setParent(this, this.$changes.root, index);\n                 }\n                 this.$changes.indexes[index] = index;\n                 this.$indexes.set(index, index);\n                 this.$items.set(index, value);\n                 this.$changes.change(index);\n                 return index;\n             };\n             CollectionSchema.prototype.at = function (index) {\n                 var key = Array.from(this.$items.keys())[index];\n                 return this.$items.get(key);\n             };\n             CollectionSchema.prototype.entries = function () {\n                 return this.$items.entries();\n             };\n             CollectionSchema.prototype.delete = function (item) {\n                 var entries = this.$items.entries();\n                 var index;\n                 var entry;\n                 while (entry = entries.next()) {\n                     if (entry.done) {\n                         break;\n                     }\n                     if (item === entry.value[1]) {\n                         index = entry.value[0];\n                         break;\n                     }\n                 }\n                 if (index === undefined) {\n                     return false;\n                 }\n                 this.$changes.delete(index);\n                 this.$indexes.delete(index);\n                 return this.$items.delete(index);\n             };\n             CollectionSchema.prototype.clear = function (isDecoding) {\n                 var _this = this;\n                 // discard previous operations.\n                 this.$changes.discard(true, true);\n                 this.$changes.indexes = {};\n                 // clear previous indexes\n                 this.$indexes.clear();\n                 // flag child items for garbage collection.\n                 if (isDecoding && typeof (this.$changes.getType()) !== \"string\") {\n                     this.$items.forEach(function (item) {\n                         _this.$changes.root.removeRef(item['$changes'].refId);\n                     });\n                 }\n                 // clear items\n                 this.$items.clear();\n                 this.$changes.operation({ index: 0, op: exports.OPERATION.CLEAR });\n                 // touch all structures until reach root\n                 this.$changes.touchParents();\n             };\n             CollectionSchema.prototype.has = function (value) {\n                 return Array.from(this.$items.values()).some(function (v) { return v === value; });\n             };\n             CollectionSchema.prototype.forEach = function (callbackfn) {\n                 var _this = this;\n                 this.$items.forEach(function (value, key, _) { return callbackfn(value, key, _this); });\n             };\n             CollectionSchema.prototype.values = function () {\n                 return this.$items.values();\n             };\n             Object.defineProperty(CollectionSchema.prototype, \"size\", {\n                 get: function () {\n                     return this.$items.size;\n                 },\n                 enumerable: false,\n                 configurable: true\n             });\n             CollectionSchema.prototype.setIndex = function (index, key) {\n                 this.$indexes.set(index, key);\n             };\n             CollectionSchema.prototype.getIndex = function (index) {\n                 return this.$indexes.get(index);\n             };\n             CollectionSchema.prototype.getByIndex = function (index) {\n                 return this.$items.get(this.$indexes.get(index));\n             };\n             CollectionSchema.prototype.deleteByIndex = function (index) {\n                 var key = this.$indexes.get(index);\n                 this.$items.delete(key);\n                 this.$indexes.delete(index);\n             };\n             CollectionSchema.prototype.toArray = function () {\n                 return Array.from(this.$items.values());\n             };\n             CollectionSchema.prototype.toJSON = function () {\n                 var values = [];\n                 this.forEach(function (value, key) {\n                     values.push((typeof (value['toJSON']) === \"function\")\n                         ? value['toJSON']()\n                         : value);\n                 });\n                 return values;\n             };\n             //\n             // Decoding utilities\n             //\n             CollectionSchema.prototype.clone = function (isDecoding) {\n                 var cloned;\n                 if (isDecoding) {\n                     // client-side\n                     cloned = Object.assign(new CollectionSchema(), this);\n                 }\n                 else {\n                     // server-side\n                     cloned = new CollectionSchema();\n                     this.forEach(function (value) {\n                         if (value['$changes']) {\n                             cloned.add(value['clone']());\n                         }\n                         else {\n                             cloned.add(value);\n                         }\n                     });\n                 }\n                 return cloned;\n             };\n             CollectionSchema.prototype.triggerAll = function () {\n                 Schema.prototype.triggerAll.apply(this);\n             };\n             return CollectionSchema;\n         }());\n\n         var SetSchema = /** @class */ (function () {\n             function SetSchema(initialValues) {\n                 var _this = this;\n                 this.$changes = new ChangeTree(this);\n                 this.$items = new Map();\n                 this.$indexes = new Map();\n                 this.$refId = 0;\n                 if (initialValues) {\n                     initialValues.forEach(function (v) { return _this.add(v); });\n                 }\n             }\n             SetSchema.is = function (type) {\n                 return type['set'] !== undefined;\n             };\n             SetSchema.prototype.add = function (value) {\n                 var _a, _b;\n                 // immediatelly return false if value already added.\n                 if (this.has(value)) {\n                     return false;\n                 }\n                 // set \"index\" for reference.\n                 var index = this.$refId++;\n                 if ((value['$changes']) !== undefined) {\n                     value['$changes'].setParent(this, this.$changes.root, index);\n                 }\n                 var operation = (_b = (_a = this.$changes.indexes[index]) === null || _a === void 0 ? void 0 : _a.op) !== null && _b !== void 0 ? _b : exports.OPERATION.ADD;\n                 this.$changes.indexes[index] = index;\n                 this.$indexes.set(index, index);\n                 this.$items.set(index, value);\n                 this.$changes.change(index, operation);\n                 return index;\n             };\n             SetSchema.prototype.entries = function () {\n                 return this.$items.entries();\n             };\n             SetSchema.prototype.delete = function (item) {\n                 var entries = this.$items.entries();\n                 var index;\n                 var entry;\n                 while (entry = entries.next()) {\n                     if (entry.done) {\n                         break;\n                     }\n                     if (item === entry.value[1]) {\n                         index = entry.value[0];\n                         break;\n                     }\n                 }\n                 if (index === undefined) {\n                     return false;\n                 }\n                 this.$changes.delete(index);\n                 this.$indexes.delete(index);\n                 return this.$items.delete(index);\n             };\n             SetSchema.prototype.clear = function (isDecoding) {\n                 var _this = this;\n                 // discard previous operations.\n                 this.$changes.discard(true, true);\n                 this.$changes.indexes = {};\n                 // clear previous indexes\n                 this.$indexes.clear();\n                 // flag child items for garbage collection.\n                 if (isDecoding && typeof (this.$changes.getType()) !== \"string\") {\n                     this.$items.forEach(function (item) {\n                         _this.$changes.root.removeRef(item['$changes'].refId);\n                     });\n                 }\n                 // clear items\n                 this.$items.clear();\n                 this.$changes.operation({ index: 0, op: exports.OPERATION.CLEAR });\n                 // touch all structures until reach root\n                 this.$changes.touchParents();\n             };\n             SetSchema.prototype.has = function (value) {\n                 var values = this.$items.values();\n                 var has = false;\n                 var entry;\n                 while (entry = values.next()) {\n                     if (entry.done) {\n                         break;\n                     }\n                     if (value === entry.value) {\n                         has = true;\n                         break;\n                     }\n                 }\n                 return has;\n             };\n             SetSchema.prototype.forEach = function (callbackfn) {\n                 var _this = this;\n                 this.$items.forEach(function (value, key, _) { return callbackfn(value, key, _this); });\n             };\n             SetSchema.prototype.values = function () {\n                 return this.$items.values();\n             };\n             Object.defineProperty(SetSchema.prototype, \"size\", {\n                 get: function () {\n                     return this.$items.size;\n                 },\n                 enumerable: false,\n                 configurable: true\n             });\n             SetSchema.prototype.setIndex = function (index, key) {\n                 this.$indexes.set(index, key);\n             };\n             SetSchema.prototype.getIndex = function (index) {\n                 return this.$indexes.get(index);\n             };\n             SetSchema.prototype.getByIndex = function (index) {\n                 return this.$items.get(this.$indexes.get(index));\n             };\n             SetSchema.prototype.deleteByIndex = function (index) {\n                 var key = this.$indexes.get(index);\n                 this.$items.delete(key);\n                 this.$indexes.delete(index);\n             };\n             SetSchema.prototype.toArray = function () {\n                 return Array.from(this.$items.values());\n             };\n             SetSchema.prototype.toJSON = function () {\n                 var values = [];\n                 this.forEach(function (value, key) {\n                     values.push((typeof (value['toJSON']) === \"function\")\n                         ? value['toJSON']()\n                         : value);\n                 });\n                 return values;\n             };\n             //\n             // Decoding utilities\n             //\n             SetSchema.prototype.clone = function (isDecoding) {\n                 var cloned;\n                 if (isDecoding) {\n                     // client-side\n                     cloned = Object.assign(new SetSchema(), this);\n                 }\n                 else {\n                     // server-side\n                     cloned = new SetSchema();\n                     this.forEach(function (value) {\n                         if (value['$changes']) {\n                             cloned.add(value['clone']());\n                         }\n                         else {\n                             cloned.add(value);\n                         }\n                     });\n                 }\n                 return cloned;\n             };\n             SetSchema.prototype.triggerAll = function () {\n                 Schema.prototype.triggerAll.apply(this);\n             };\n             return SetSchema;\n         }());\n\n         /**\n          * Extracted from https://www.npmjs.com/package/strong-events\n          */\n         var EventEmitter_ = /** @class */ (function () {\n             function EventEmitter_() {\n                 this.handlers = [];\n             }\n             EventEmitter_.prototype.register = function (cb, once) {\n                 this.handlers.push(cb);\n                 return this;\n             };\n             EventEmitter_.prototype.invoke = function () {\n                 var args = [];\n                 for (var _i = 0; _i < arguments.length; _i++) {\n                     args[_i] = arguments[_i];\n                 }\n                 this.handlers.forEach(function (handler) { return handler.apply(void 0, args); });\n             };\n             EventEmitter_.prototype.invokeAsync = function () {\n                 var args = [];\n                 for (var _i = 0; _i < arguments.length; _i++) {\n                     args[_i] = arguments[_i];\n                 }\n                 return Promise.all(this.handlers.map(function (handler) { return handler.apply(void 0, args); }));\n             };\n             EventEmitter_.prototype.remove = function (cb) {\n                 var index = this.handlers.indexOf(cb);\n                 this.handlers[index] = this.handlers[this.handlers.length - 1];\n                 this.handlers.pop();\n             };\n             EventEmitter_.prototype.clear = function () {\n                 this.handlers = [];\n             };\n             return EventEmitter_;\n         }());\n\n         var ClientState = /** @class */ (function () {\n             function ClientState() {\n                 this.refIds = new WeakSet();\n                 this.containerIndexes = new WeakMap();\n             }\n             // containerIndexes = new Map<ChangeTree, Set<number>>();\n             ClientState.prototype.addRefId = function (changeTree) {\n                 if (!this.refIds.has(changeTree)) {\n                     this.refIds.add(changeTree);\n                     this.containerIndexes.set(changeTree, new Set());\n                 }\n             };\n             ClientState.get = function (client) {\n                 if (client.$filterState === undefined) {\n                     client.$filterState = new ClientState();\n                 }\n                 return client.$filterState;\n             };\n             return ClientState;\n         }());\n\n         var EncodeSchemaError = /** @class */ (function (_super) {\n             __extends(EncodeSchemaError, _super);\n             function EncodeSchemaError() {\n                 return _super !== null && _super.apply(this, arguments) || this;\n             }\n             return EncodeSchemaError;\n         }(Error));\n         function assertType(value, type, klass, field) {\n             var typeofTarget;\n             var allowNull = false;\n             switch (type) {\n                 case \"number\":\n                 case \"int8\":\n                 case \"uint8\":\n                 case \"int16\":\n                 case \"uint16\":\n                 case \"int32\":\n                 case \"uint32\":\n                 case \"int64\":\n                 case \"uint64\":\n                 case \"float32\":\n                 case \"float64\":\n                     typeofTarget = \"number\";\n                     if (isNaN(value)) {\n                         console.log(\"trying to encode \\\"NaN\\\" in \" + klass.constructor.name + \"#\" + field);\n                     }\n                     break;\n                 case \"string\":\n                     typeofTarget = \"string\";\n                     allowNull = true;\n                     break;\n                 case \"boolean\":\n                     // boolean is always encoded as true/false based on truthiness\n                     return;\n             }\n             if (typeof (value) !== typeofTarget && (!allowNull || (allowNull && value !== null))) {\n                 var foundValue = \"'\" + JSON.stringify(value) + \"'\" + ((value && value.constructor && \" (\" + value.constructor.name + \")\") || '');\n                 throw new EncodeSchemaError(\"a '\" + typeofTarget + \"' was expected, but \" + foundValue + \" was provided in \" + klass.constructor.name + \"#\" + field);\n             }\n         }\n         function assertInstanceType(value, type, klass, field) {\n             if (!(value instanceof type)) {\n                 throw new EncodeSchemaError(\"a '\" + type.name + \"' was expected, but '\" + value.constructor.name + \"' was provided in \" + klass.constructor.name + \"#\" + field);\n             }\n         }\n         function encodePrimitiveType(type, bytes, value, klass, field) {\n             assertType(value, type, klass, field);\n             var encodeFunc = encode[type];\n             if (encodeFunc) {\n                 encodeFunc(bytes, value);\n             }\n             else {\n                 throw new EncodeSchemaError(\"a '\" + type + \"' was expected, but \" + value + \" was provided in \" + klass.constructor.name + \"#\" + field);\n             }\n         }\n         function decodePrimitiveType(type, bytes, it) {\n             return decode[type](bytes, it);\n         }\n         /**\n          * Schema encoder / decoder\n          */\n         var Schema = /** @class */ (function () {\n             // allow inherited classes to have a constructor\n             function Schema() {\n                 var args = [];\n                 for (var _i = 0; _i < arguments.length; _i++) {\n                     args[_i] = arguments[_i];\n                 }\n                 // fix enumerability of fields for end-user\n                 Object.defineProperties(this, {\n                     $changes: {\n                         value: new ChangeTree(this, undefined, new Root()),\n                         enumerable: false,\n                         writable: true\n                     },\n                     $listeners: {\n                         value: {},\n                         enumerable: false,\n                         writable: true\n                     },\n                 });\n                 var descriptors = this._definition.descriptors;\n                 if (descriptors) {\n                     Object.defineProperties(this, descriptors);\n                 }\n                 //\n                 // Assign initial values\n                 //\n                 if (args[0]) {\n                     this.assign(args[0]);\n                 }\n             }\n             Schema.onError = function (e) {\n                 console.error(e);\n             };\n             Schema.is = function (type) {\n                 return (type['_definition'] &&\n                     type['_definition'].schema !== undefined);\n             };\n             Schema.prototype.assign = function (props) {\n                 Object.assign(this, props);\n                 return this;\n             };\n             Object.defineProperty(Schema.prototype, \"_definition\", {\n                 get: function () { return this.constructor._definition; },\n                 enumerable: false,\n                 configurable: true\n             });\n             Schema.prototype.listen = function (attr, callback) {\n                 var _this = this;\n                 if (!this.$listeners[attr]) {\n                     this.$listeners[attr] = new EventEmitter_();\n                 }\n                 this.$listeners[attr].register(callback);\n                 // return un-register callback.\n                 return function () {\n                     return _this.$listeners[attr].remove(callback);\n                 };\n             };\n             Schema.prototype.decode = function (bytes, it, ref, allChanges) {\n                 if (it === void 0) { it = { offset: 0 }; }\n                 if (ref === void 0) { ref = this; }\n                 if (allChanges === void 0) { allChanges = new Map(); }\n                 var $root = this.$changes.root;\n                 var totalBytes = bytes.length;\n                 var refId = 0;\n                 var changes = [];\n                 $root.refs.set(refId, this);\n                 allChanges.set(refId, changes);\n                 while (it.offset < totalBytes) {\n                     var byte = bytes[it.offset++];\n                     if (byte == SWITCH_TO_STRUCTURE) {\n                         refId = number(bytes, it);\n                         var nextRef = $root.refs.get(refId);\n                         //\n                         // Trying to access a reference that haven't been decoded yet.\n                         //\n                         if (!nextRef) {\n                             throw new Error(\"\\\"refId\\\" not found: \" + refId);\n                         }\n                         ref = nextRef;\n                         // create empty list of changes for this refId.\n                         changes = [];\n                         allChanges.set(refId, changes);\n                         continue;\n                     }\n                     var changeTree = ref['$changes'];\n                     var isSchema = (ref['_definition'] !== undefined);\n                     var operation = (isSchema)\n                         ? (byte >> 6) << 6 // \"compressed\" index + operation\n                         : byte; // \"uncompressed\" index + operation (array/map items)\n                     if (operation === exports.OPERATION.CLEAR) {\n                         //\n                         // TODO: refactor me!\n                         // The `.clear()` method is calling `$root.removeRef(refId)` for\n                         // each item inside this collection\n                         //\n                         ref.clear(true);\n                         continue;\n                     }\n                     var fieldIndex = (isSchema)\n                         ? byte % (operation || 255) // if \"REPLACE\" operation (0), use 255\n                         : number(bytes, it);\n                     var fieldName = (isSchema)\n                         ? (ref['_definition'].fieldsByIndex[fieldIndex])\n                         : \"\";\n                     var type = changeTree.getType(fieldIndex);\n                     var value = void 0;\n                     var previousValue = void 0;\n                     var dynamicIndex = void 0;\n                     if (!isSchema) {\n                         previousValue = ref['getByIndex'](fieldIndex);\n                         if ((operation & exports.OPERATION.ADD) === exports.OPERATION.ADD) { // ADD or DELETE_AND_ADD\n                             dynamicIndex = (ref instanceof MapSchema)\n                                 ? string(bytes, it)\n                                 : fieldIndex;\n                             ref['setIndex'](fieldIndex, dynamicIndex);\n                         }\n                         else {\n                             // here\n                             dynamicIndex = ref['getIndex'](fieldIndex);\n                         }\n                     }\n                     else {\n                         previousValue = ref[\"_\" + fieldName];\n                     }\n                     //\n                     // Delete operations\n                     //\n                     if ((operation & exports.OPERATION.DELETE) === exports.OPERATION.DELETE) {\n                         if (operation !== exports.OPERATION.DELETE_AND_ADD) {\n                             ref['deleteByIndex'](fieldIndex);\n                         }\n                         // Flag `refId` for garbage collection.\n                         if (previousValue && previousValue['$changes']) {\n                             $root.removeRef(previousValue['$changes'].refId);\n                         }\n                         value = null;\n                     }\n                     if (fieldName === undefined) {\n                         console.warn(\"@colyseus/schema: definition mismatch\");\n                         //\n                         // keep skipping next bytes until reaches a known structure\n                         // by local decoder.\n                         //\n                         var nextIterator = { offset: it.offset };\n                         while (it.offset < totalBytes) {\n                             if (switchStructureCheck(bytes, it)) {\n                                 nextIterator.offset = it.offset + 1;\n                                 if ($root.refs.has(number(bytes, nextIterator))) {\n                                     break;\n                                 }\n                             }\n                             it.offset++;\n                         }\n                         continue;\n                     }\n                     else if (operation === exports.OPERATION.DELETE) ;\n                     else if (Schema.is(type)) {\n                         var refId_1 = number(bytes, it);\n                         value = $root.refs.get(refId_1);\n                         if (operation !== exports.OPERATION.REPLACE) {\n                             var childType = this.getSchemaType(bytes, it, type);\n                             if (!value) {\n                                 value = this.createTypeInstance(childType);\n                                 value.$changes.refId = refId_1;\n                                 if (previousValue) {\n                                     value.onChange = previousValue.onChange;\n                                     value.onRemove = previousValue.onRemove;\n                                     value.$listeners = previousValue.$listeners;\n                                     if (previousValue['$changes'].refId &&\n                                         refId_1 !== previousValue['$changes'].refId) {\n                                         $root.removeRef(previousValue['$changes'].refId);\n                                     }\n                                 }\n                             }\n                             $root.addRef(refId_1, value, (value !== previousValue));\n                         }\n                     }\n                     else if (typeof (type) === \"string\") {\n                         //\n                         // primitive value (number, string, boolean, etc)\n                         //\n                         value = decodePrimitiveType(type, bytes, it);\n                     }\n                     else {\n                         var typeDef = getType(Object.keys(type)[0]);\n                         var refId_2 = number(bytes, it);\n                         var valueRef = ($root.refs.has(refId_2))\n                             ? previousValue || $root.refs.get(refId_2)\n                             : new typeDef.constructor();\n                         value = valueRef.clone(true);\n                         value.$changes.refId = refId_2;\n                         // preserve schema callbacks\n                         if (previousValue) {\n                             value.onAdd = previousValue.onAdd;\n                             value.onRemove = previousValue.onRemove;\n                             value.onChange = previousValue.onChange;\n                             if (previousValue['$changes'].refId &&\n                                 refId_2 !== previousValue['$changes'].refId) {\n                                 $root.removeRef(previousValue['$changes'].refId);\n                                 //\n                                 // Trigger onRemove if structure has been replaced.\n                                 //\n                                 var deletes = [];\n                                 var entries = previousValue.entries();\n                                 var iter = void 0;\n                                 while ((iter = entries.next()) && !iter.done) {\n                                     var _a = iter.value, key = _a[0], value_1 = _a[1];\n                                     deletes.push({\n                                         op: exports.OPERATION.DELETE,\n                                         field: key,\n                                         value: undefined,\n                                         previousValue: value_1,\n                                     });\n                                 }\n                                 allChanges.set(previousValue['$changes'].refId, deletes);\n                             }\n                         }\n                         $root.addRef(refId_2, value, (valueRef !== previousValue));\n                         //\n                         // TODO: deprecate proxies on next version.\n                         // get proxy to target value.\n                         //\n                         if (typeDef.getProxy) {\n                             value = typeDef.getProxy(value);\n                         }\n                     }\n                     var hasChange = (previousValue !== value);\n                     if (value !== null &&\n                         value !== undefined) {\n                         if (value['$changes']) {\n                             value['$changes'].setParent(changeTree.ref, changeTree.root, fieldIndex);\n                         }\n                         if (ref instanceof Schema) {\n                             ref[fieldName] = value;\n                             //\n                             // FIXME: use `_field` instead of `field`.\n                             //\n                             // `field` is going to use the setter of the PropertyDescriptor\n                             // and create a proxy for array/map. This is only useful for\n                             // backwards-compatibility with @colyseus/schema@0.5.x\n                             //\n                             // // ref[_field] = value;\n                         }\n                         else if (ref instanceof MapSchema) {\n                             // const key = ref['$indexes'].get(field);\n                             var key = dynamicIndex;\n                             // ref.set(key, value);\n                             ref['$items'].set(key, value);\n                         }\n                         else if (ref instanceof ArraySchema) {\n                             // const key = ref['$indexes'][field];\n                             // console.log(\"SETTING FOR ArraySchema =>\", { field, key, value });\n                             // ref[key] = value;\n                             ref.setAt(fieldIndex, value);\n                         }\n                         else if (ref instanceof CollectionSchema) {\n                             var index = ref.add(value);\n                             ref['setIndex'](fieldIndex, index);\n                         }\n                         else if (ref instanceof SetSchema) {\n                             var index = ref.add(value);\n                             if (index !== false) {\n                                 ref['setIndex'](fieldIndex, index);\n                             }\n                         }\n                     }\n                     if (hasChange\n                     // &&\n                     // (\n                     //     this.onChange || ref.$listeners[field]\n                     // )\n                     ) {\n                         changes.push({\n                             op: operation,\n                             field: fieldName,\n                             dynamicIndex: dynamicIndex,\n                             value: value,\n                             previousValue: previousValue,\n                         });\n                     }\n                 }\n                 this._triggerChanges(allChanges);\n                 // drop references of unused schemas\n                 $root.garbageCollectDeletedRefs();\n                 return allChanges;\n             };\n             Schema.prototype.encode = function (encodeAll, bytes, useFilters) {\n                 if (encodeAll === void 0) { encodeAll = false; }\n                 if (bytes === void 0) { bytes = []; }\n                 if (useFilters === void 0) { useFilters = false; }\n                 var rootChangeTree = this.$changes;\n                 var refIdsVisited = new WeakSet();\n                 var changeTrees = [rootChangeTree];\n                 var numChangeTrees = 1;\n                 for (var i = 0; i < numChangeTrees; i++) {\n                     var changeTree = changeTrees[i];\n                     var ref = changeTree.ref;\n                     var isSchema = (ref instanceof Schema);\n                     // Generate unique refId for the ChangeTree.\n                     changeTree.ensureRefId();\n                     // mark this ChangeTree as visited.\n                     refIdsVisited.add(changeTree);\n                     // root `refId` is skipped.\n                     if (changeTree !== rootChangeTree &&\n                         (changeTree.changed || encodeAll)) {\n                         uint8$1(bytes, SWITCH_TO_STRUCTURE);\n                         number$1(bytes, changeTree.refId);\n                     }\n                     var changes = (encodeAll)\n                         ? Array.from(changeTree.allChanges)\n                         : Array.from(changeTree.changes.values());\n                     for (var j = 0, cl = changes.length; j < cl; j++) {\n                         var operation = (encodeAll)\n                             ? { op: exports.OPERATION.ADD, index: changes[j] }\n                             : changes[j];\n                         var fieldIndex = operation.index;\n                         var field = (isSchema)\n                             ? ref['_definition'].fieldsByIndex && ref['_definition'].fieldsByIndex[fieldIndex]\n                             : fieldIndex;\n                         // cache begin index if `useFilters`\n                         var beginIndex = bytes.length;\n                         // encode field index + operation\n                         if (operation.op !== exports.OPERATION.TOUCH) {\n                             if (isSchema) {\n                                 //\n                                 // Compress `fieldIndex` + `operation` into a single byte.\n                                 // This adds a limitaion of 64 fields per Schema structure\n                                 //\n                                 uint8$1(bytes, (fieldIndex | operation.op));\n                             }\n                             else {\n                                 uint8$1(bytes, operation.op);\n                                 // custom operations\n                                 if (operation.op === exports.OPERATION.CLEAR) {\n                                     continue;\n                                 }\n                                 // indexed operations\n                                 number$1(bytes, fieldIndex);\n                             }\n                         }\n                         //\n                         // encode \"alias\" for dynamic fields (maps)\n                         //\n                         if (!isSchema &&\n                             (operation.op & exports.OPERATION.ADD) == exports.OPERATION.ADD // ADD or DELETE_AND_ADD\n                         ) {\n                             if (ref instanceof MapSchema) {\n                                 //\n                                 // MapSchema dynamic key\n                                 //\n                                 var dynamicIndex = changeTree.ref['$indexes'].get(fieldIndex);\n                                 string$1(bytes, dynamicIndex);\n                             }\n                         }\n                         if (operation.op === exports.OPERATION.DELETE) {\n                             //\n                             // TODO: delete from filter cache data.\n                             //\n                             // if (useFilters) {\n                             //     delete changeTree.caches[fieldIndex];\n                             // }\n                             continue;\n                         }\n                         // const type = changeTree.childType || ref._schema[field];\n                         var type = changeTree.getType(fieldIndex);\n                         // const type = changeTree.getType(fieldIndex);\n                         var value = changeTree.getValue(fieldIndex);\n                         // Enqueue ChangeTree to be visited\n                         if (value &&\n                             value['$changes'] &&\n                             !refIdsVisited.has(value['$changes'])) {\n                             changeTrees.push(value['$changes']);\n                             value['$changes'].ensureRefId();\n                             numChangeTrees++;\n                         }\n                         if (operation.op === exports.OPERATION.TOUCH) {\n                             continue;\n                         }\n                         if (Schema.is(type)) {\n                             assertInstanceType(value, type, ref, field);\n                             //\n                             // Encode refId for this instance.\n                             // The actual instance is going to be encoded on next `changeTree` iteration.\n                             //\n                             number$1(bytes, value.$changes.refId);\n                             // Try to encode inherited TYPE_ID if it's an ADD operation.\n                             if ((operation.op & exports.OPERATION.ADD) === exports.OPERATION.ADD) {\n                                 this.tryEncodeTypeId(bytes, type, value.constructor);\n                             }\n                         }\n                         else if (typeof (type) === \"string\") {\n                             //\n                             // Primitive values\n                             //\n                             encodePrimitiveType(type, bytes, value, ref, field);\n                         }\n                         else {\n                             //\n                             // Custom type (MapSchema, ArraySchema, etc)\n                             //\n                             var definition = getType(Object.keys(type)[0]);\n                             //\n                             // ensure a ArraySchema has been provided\n                             //\n                             assertInstanceType(ref[\"_\" + field], definition.constructor, ref, field);\n                             //\n                             // Encode refId for this instance.\n                             // The actual instance is going to be encoded on next `changeTree` iteration.\n                             //\n                             number$1(bytes, value.$changes.refId);\n                         }\n                         if (useFilters) {\n                             // cache begin / end index\n                             changeTree.cache(fieldIndex, bytes.slice(beginIndex));\n                         }\n                     }\n                     if (!encodeAll && !useFilters) {\n                         changeTree.discard();\n                     }\n                 }\n                 return bytes;\n             };\n             Schema.prototype.encodeAll = function (useFilters) {\n                 return this.encode(true, [], useFilters);\n             };\n             Schema.prototype.applyFilters = function (client, encodeAll) {\n                 if (encodeAll === void 0) { encodeAll = false; }\n                 var root = this;\n                 var refIdsDissallowed = new Set();\n                 var $filterState = ClientState.get(client);\n                 var changeTrees = [this.$changes];\n                 var numChangeTrees = 1;\n                 var filteredBytes = [];\n                 var _loop_1 = function (i) {\n                     var changeTree = changeTrees[i];\n                     if (refIdsDissallowed.has(changeTree.refId)) {\n                         return \"continue\";\n                     }\n                     var ref = changeTree.ref;\n                     var isSchema = ref instanceof Schema;\n                     uint8$1(filteredBytes, SWITCH_TO_STRUCTURE);\n                     number$1(filteredBytes, changeTree.refId);\n                     var clientHasRefId = $filterState.refIds.has(changeTree);\n                     var isEncodeAll = (encodeAll || !clientHasRefId);\n                     // console.log(\"REF:\", ref.constructor.name);\n                     // console.log(\"Encode all?\", isEncodeAll);\n                     //\n                     // include `changeTree` on list of known refIds by this client.\n                     //\n                     $filterState.addRefId(changeTree);\n                     var containerIndexes = $filterState.containerIndexes.get(changeTree);\n                     var changes = (isEncodeAll)\n                         ? Array.from(changeTree.allChanges)\n                         : Array.from(changeTree.changes.values());\n                     //\n                     // WORKAROUND: tries to re-evaluate previously not included @filter() attributes\n                     // - see \"DELETE a field of Schema\" test case.\n                     //\n                     if (!encodeAll &&\n                         isSchema &&\n                         ref._definition.indexesWithFilters) {\n                         var indexesWithFilters = ref._definition.indexesWithFilters;\n                         indexesWithFilters.forEach(function (indexWithFilter) {\n                             if (!containerIndexes.has(indexWithFilter) &&\n                                 changeTree.allChanges.has(indexWithFilter)) {\n                                 if (isEncodeAll) {\n                                     changes.push(indexWithFilter);\n                                 }\n                                 else {\n                                     changes.push({ op: exports.OPERATION.ADD, index: indexWithFilter, });\n                                 }\n                             }\n                         });\n                     }\n                     for (var j = 0, cl = changes.length; j < cl; j++) {\n                         var change = (isEncodeAll)\n                             ? { op: exports.OPERATION.ADD, index: changes[j] }\n                             : changes[j];\n                         // custom operations\n                         if (change.op === exports.OPERATION.CLEAR) {\n                             uint8$1(filteredBytes, change.op);\n                             continue;\n                         }\n                         var fieldIndex = change.index;\n                         //\n                         // Deleting fields: encode the operation + field index\n                         //\n                         if (change.op === exports.OPERATION.DELETE) {\n                             //\n                             // DELETE operations also need to go through filtering.\n                             //\n                             // TODO: cache the previous value so we can access the value (primitive or `refId`)\n                             // (check against `$filterState.refIds`)\n                             //\n                             if (isSchema) {\n                                 uint8$1(filteredBytes, change.op | fieldIndex);\n                             }\n                             else {\n                                 uint8$1(filteredBytes, change.op);\n                                 number$1(filteredBytes, fieldIndex);\n                             }\n                             continue;\n                         }\n                         // indexed operation\n                         var value = changeTree.getValue(fieldIndex);\n                         var type = changeTree.getType(fieldIndex);\n                         if (isSchema) {\n                             // Is a Schema!\n                             var filter = (ref._definition.filters &&\n                                 ref._definition.filters[fieldIndex]);\n                             if (filter && !filter.call(ref, client, value, root)) {\n                                 if (value && value['$changes']) {\n                                     refIdsDissallowed.add(value['$changes'].refId);\n                                 }\n                                 continue;\n                             }\n                         }\n                         else {\n                             // Is a collection! (map, array, etc.)\n                             var parent = changeTree.parent;\n                             var filter = changeTree.getChildrenFilter();\n                             if (filter && !filter.call(parent, client, ref['$indexes'].get(fieldIndex), value, root)) {\n                                 if (value && value['$changes']) {\n                                     refIdsDissallowed.add(value['$changes'].refId);\n                                 }\n                                 continue;\n                             }\n                         }\n                         // visit child ChangeTree on further iteration.\n                         if (value['$changes']) {\n                             changeTrees.push(value['$changes']);\n                             numChangeTrees++;\n                         }\n                         //\n                         // Copy cached bytes\n                         //\n                         if (change.op !== exports.OPERATION.TOUCH) {\n                             //\n                             // TODO: refactor me!\n                             //\n                             if (change.op === exports.OPERATION.ADD || isSchema) {\n                                 //\n                                 // use cached bytes directly if is from Schema type.\n                                 //\n                                 filteredBytes = filteredBytes.concat(changeTree.caches[fieldIndex]);\n                                 containerIndexes.add(fieldIndex);\n                             }\n                             else {\n                                 if (containerIndexes.has(fieldIndex)) {\n                                     //\n                                     // use cached bytes if already has the field\n                                     //\n                                     filteredBytes = filteredBytes.concat(changeTree.caches[fieldIndex]);\n                                 }\n                                 else {\n                                     //\n                                     // force ADD operation if field is not known by this client.\n                                     //\n                                     containerIndexes.add(fieldIndex);\n                                     uint8$1(filteredBytes, exports.OPERATION.ADD);\n                                     number$1(filteredBytes, fieldIndex);\n                                     if (ref instanceof MapSchema) {\n                                         //\n                                         // MapSchema dynamic key\n                                         //\n                                         var dynamicIndex = changeTree.ref['$indexes'].get(fieldIndex);\n                                         string$1(filteredBytes, dynamicIndex);\n                                     }\n                                     if (value['$changes']) {\n                                         number$1(filteredBytes, value['$changes'].refId);\n                                     }\n                                     else {\n                                         // \"encodePrimitiveType\" without type checking.\n                                         // the type checking has been done on the first .encode() call.\n                                         encode[type](filteredBytes, value);\n                                     }\n                                 }\n                             }\n                         }\n                         else if (value['$changes'] && !isSchema) {\n                             //\n                             // TODO:\n                             // - track ADD/REPLACE/DELETE instances on `$filterState`\n                             // - do NOT always encode dynamicIndex for MapSchema.\n                             //   (If client already has that key, only the first index is necessary.)\n                             //\n                             uint8$1(filteredBytes, exports.OPERATION.ADD);\n                             number$1(filteredBytes, fieldIndex);\n                             if (ref instanceof MapSchema) {\n                                 //\n                                 // MapSchema dynamic key\n                                 //\n                                 var dynamicIndex = changeTree.ref['$indexes'].get(fieldIndex);\n                                 string$1(filteredBytes, dynamicIndex);\n                             }\n                             number$1(filteredBytes, value['$changes'].refId);\n                         }\n                     }\n                 };\n                 for (var i = 0; i < numChangeTrees; i++) {\n                     _loop_1(i);\n                 }\n                 return filteredBytes;\n             };\n             Schema.prototype.clone = function () {\n                 var cloned = new (this.constructor);\n                 var schema = this._definition.schema;\n                 for (var field in schema) {\n                     if (typeof (this[field]) === \"object\" &&\n                         typeof (this[field].clone) === \"function\") {\n                         // deep clone\n                         cloned[field] = this[field].clone();\n                     }\n                     else {\n                         // primitive values\n                         cloned[field] = this[field];\n                     }\n                 }\n                 return cloned;\n             };\n             Schema.prototype.triggerAll = function () {\n                 // skip if haven't received any remote refs yet.\n                 if (this.$changes.root.refs.size === 0) {\n                     return;\n                 }\n                 var allChanges = new Map();\n                 Schema.prototype._triggerAllFillChanges.call(this, this, allChanges);\n                 try {\n                     Schema.prototype._triggerChanges.call(this, allChanges);\n                 }\n                 catch (e) {\n                     Schema.onError(e);\n                 }\n             };\n             Schema.prototype.toJSON = function () {\n                 var schema = this._definition.schema;\n                 var deprecated = this._definition.deprecated;\n                 var obj = {};\n                 for (var field in schema) {\n                     if (!deprecated[field] && this[field] !== null && typeof (this[field]) !== \"undefined\") {\n                         obj[field] = (typeof (this[field]['toJSON']) === \"function\")\n                             ? this[field]['toJSON']()\n                             : this[\"_\" + field];\n                     }\n                 }\n                 return obj;\n             };\n             Schema.prototype.discardAllChanges = function () {\n                 this.$changes.discardAll();\n             };\n             Schema.prototype.getByIndex = function (index) {\n                 return this[this._definition.fieldsByIndex[index]];\n             };\n             Schema.prototype.deleteByIndex = function (index) {\n                 this[this._definition.fieldsByIndex[index]] = undefined;\n             };\n             Schema.prototype.tryEncodeTypeId = function (bytes, type, targetType) {\n                 if (type._typeid !== targetType._typeid) {\n                     uint8$1(bytes, TYPE_ID);\n                     number$1(bytes, targetType._typeid);\n                 }\n             };\n             Schema.prototype.getSchemaType = function (bytes, it, defaultType) {\n                 var type;\n                 if (bytes[it.offset] === TYPE_ID) {\n                     it.offset++;\n                     type = this.constructor._context.get(number(bytes, it));\n                 }\n                 return type || defaultType;\n             };\n             Schema.prototype.createTypeInstance = function (type) {\n                 var instance = new type();\n                 // assign root on $changes\n                 instance.$changes.root = this.$changes.root;\n                 return instance;\n             };\n             Schema.prototype._triggerAllFillChanges = function (ref, allChanges) {\n                 if (allChanges.has(ref['$changes'].refId)) {\n                     return;\n                 }\n                 var changes = [];\n                 allChanges.set(ref['$changes'].refId || 0, changes);\n                 if (ref instanceof Schema) {\n                     var schema = ref._definition.schema;\n                     for (var fieldName in schema) {\n                         var _field = \"_\" + fieldName;\n                         var value = ref[_field];\n                         if (value !== undefined) {\n                             changes.push({\n                                 op: exports.OPERATION.ADD,\n                                 field: fieldName,\n                                 value: value,\n                                 previousValue: undefined\n                             });\n                             if (value['$changes'] !== undefined) {\n                                 Schema.prototype._triggerAllFillChanges.call(this, value, allChanges);\n                             }\n                         }\n                     }\n                 }\n                 else {\n                     var entries = ref.entries();\n                     var iter = void 0;\n                     while ((iter = entries.next()) && !iter.done) {\n                         var _a = iter.value, key = _a[0], value = _a[1];\n                         changes.push({\n                             op: exports.OPERATION.ADD,\n                             field: key,\n                             dynamicIndex: key,\n                             value: value,\n                             previousValue: undefined,\n                         });\n                         if (value['$changes'] !== undefined) {\n                             Schema.prototype._triggerAllFillChanges.call(this, value, allChanges);\n                         }\n                     }\n                 }\n             };\n             Schema.prototype._triggerChanges = function (allChanges) {\n                 var _this = this;\n                 allChanges.forEach(function (changes, refId) {\n                     var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m;\n                     if (changes.length > 0) {\n                         var ref = _this.$changes.root.refs.get(refId);\n                         var isSchema = ref instanceof Schema;\n                         for (var i = 0; i < changes.length; i++) {\n                             var change = changes[i];\n                             var listener = ref['$listeners'] && ref['$listeners'][change.field];\n                             if (!isSchema) {\n                                 if (change.op === exports.OPERATION.ADD && change.previousValue === undefined) {\n                                     (_b = (_a = ref).onAdd) === null || _b === void 0 ? void 0 : _b.call(_a, change.value, (_c = change.dynamicIndex) !== null && _c !== void 0 ? _c : change.field);\n                                 }\n                                 else if (change.op === exports.OPERATION.DELETE) {\n                                     //\n                                     // FIXME: `previousValue` should always be avaiiable.\n                                     // ADD + DELETE operations are still encoding DELETE operation.\n                                     //\n                                     if (change.previousValue !== undefined) {\n                                         (_e = (_d = ref).onRemove) === null || _e === void 0 ? void 0 : _e.call(_d, change.previousValue, (_f = change.dynamicIndex) !== null && _f !== void 0 ? _f : change.field);\n                                     }\n                                 }\n                                 else if (change.op === exports.OPERATION.DELETE_AND_ADD) {\n                                     if (change.previousValue !== undefined) {\n                                         (_h = (_g = ref).onRemove) === null || _h === void 0 ? void 0 : _h.call(_g, change.previousValue, change.dynamicIndex);\n                                     }\n                                     (_k = (_j = ref).onAdd) === null || _k === void 0 ? void 0 : _k.call(_j, change.value, change.dynamicIndex);\n                                 }\n                                 else if (change.op === exports.OPERATION.REPLACE ||\n                                     change.value !== change.previousValue) {\n                                     (_m = (_l = ref).onChange) === null || _m === void 0 ? void 0 : _m.call(_l, change.value, change.dynamicIndex);\n                                 }\n                             }\n                             //\n                             // trigger onRemove on child structure.\n                             //\n                             if ((change.op & exports.OPERATION.DELETE) === exports.OPERATION.DELETE &&\n                                 change.previousValue instanceof Schema &&\n                                 change.previousValue.onRemove) {\n                                 change.previousValue.onRemove();\n                             }\n                             if (listener) {\n                                 try {\n                                     listener.invoke(change.value, change.previousValue);\n                                 }\n                                 catch (e) {\n                                     Schema.onError(e);\n                                 }\n                             }\n                         }\n                         if (isSchema) {\n                             if (ref.onChange) {\n                                 try {\n                                     ref.onChange(changes);\n                                 }\n                                 catch (e) {\n                                     Schema.onError(e);\n                                 }\n                             }\n                         }\n                     }\n                 });\n             };\n             Schema._definition = SchemaDefinition.create();\n             return Schema;\n         }());\n\n         function dumpChanges(schema) {\n             var changeTrees = [schema['$changes']];\n             var numChangeTrees = 1;\n             var dump = {};\n             var currentStructure = dump;\n             var _loop_1 = function (i) {\n                 var changeTree = changeTrees[i];\n                 changeTree.changes.forEach(function (change) {\n                     var ref = changeTree.ref;\n                     var fieldIndex = change.index;\n                     var field = (ref['_definition'])\n                         ? ref['_definition'].fieldsByIndex[fieldIndex]\n                         : ref['$indexes'].get(fieldIndex);\n                     currentStructure[field] = changeTree.getValue(fieldIndex);\n                 });\n             };\n             for (var i = 0; i < numChangeTrees; i++) {\n                 _loop_1(i);\n             }\n             return dump;\n         }\n\n         var reflectionContext = new Context();\n         /**\n          * Reflection\n          */\n         var ReflectionField = /** @class */ (function (_super) {\n             __extends(ReflectionField, _super);\n             function ReflectionField() {\n                 return _super !== null && _super.apply(this, arguments) || this;\n             }\n             __decorate([\n                 type(\"string\", reflectionContext)\n             ], ReflectionField.prototype, \"name\", void 0);\n             __decorate([\n                 type(\"string\", reflectionContext)\n             ], ReflectionField.prototype, \"type\", void 0);\n             __decorate([\n                 type(\"number\", reflectionContext)\n             ], ReflectionField.prototype, \"referencedType\", void 0);\n             return ReflectionField;\n         }(Schema));\n         var ReflectionType = /** @class */ (function (_super) {\n             __extends(ReflectionType, _super);\n             function ReflectionType() {\n                 var _this = _super !== null && _super.apply(this, arguments) || this;\n                 _this.fields = new ArraySchema();\n                 return _this;\n             }\n             __decorate([\n                 type(\"number\", reflectionContext)\n             ], ReflectionType.prototype, \"id\", void 0);\n             __decorate([\n                 type([ReflectionField], reflectionContext)\n             ], ReflectionType.prototype, \"fields\", void 0);\n             return ReflectionType;\n         }(Schema));\n         var Reflection = /** @class */ (function (_super) {\n             __extends(Reflection, _super);\n             function Reflection() {\n                 var _this = _super !== null && _super.apply(this, arguments) || this;\n                 _this.types = new ArraySchema();\n                 return _this;\n             }\n             Reflection.encode = function (instance) {\n                 var rootSchemaType = instance.constructor;\n                 var reflection = new Reflection();\n                 reflection.rootType = rootSchemaType._typeid;\n                 var buildType = function (currentType, schema) {\n                     for (var fieldName in schema) {\n                         var field = new ReflectionField();\n                         field.name = fieldName;\n                         var fieldType = void 0;\n                         if (typeof (schema[fieldName]) === \"string\") {\n                             fieldType = schema[fieldName];\n                         }\n                         else {\n                             var type_1 = schema[fieldName];\n                             var childTypeSchema = void 0;\n                             //\n                             // TODO: refactor below.\n                             //\n                             if (Schema.is(type_1)) {\n                                 fieldType = \"ref\";\n                                 childTypeSchema = schema[fieldName];\n                             }\n                             else {\n                                 fieldType = Object.keys(type_1)[0];\n                                 if (typeof (type_1[fieldType]) === \"string\") {\n                                     fieldType += \":\" + type_1[fieldType]; // array:string\n                                 }\n                                 else {\n                                     childTypeSchema = type_1[fieldType];\n                                 }\n                             }\n                             field.referencedType = (childTypeSchema)\n                                 ? childTypeSchema._typeid\n                                 : -1;\n                         }\n                         field.type = fieldType;\n                         currentType.fields.push(field);\n                     }\n                     reflection.types.push(currentType);\n                 };\n                 var types = rootSchemaType._context.types;\n                 for (var typeid in types) {\n                     var type_2 = new ReflectionType();\n                     type_2.id = Number(typeid);\n                     buildType(type_2, types[typeid]._definition.schema);\n                 }\n                 return reflection.encodeAll();\n             };\n             Reflection.decode = function (bytes, it) {\n                 var context = new Context();\n                 var reflection = new Reflection();\n                 reflection.decode(bytes, it);\n                 var schemaTypes = reflection.types.reduce(function (types, reflectionType) {\n                     var schema = /** @class */ (function (_super) {\n                         __extends(_, _super);\n                         function _() {\n                             return _super !== null && _super.apply(this, arguments) || this;\n                         }\n                         return _;\n                     }(Schema));\n                     var typeid = reflectionType.id;\n                     types[typeid] = schema;\n                     context.add(schema, typeid);\n                     return types;\n                 }, {});\n                 reflection.types.forEach(function (reflectionType) {\n                     var schemaType = schemaTypes[reflectionType.id];\n                     reflectionType.fields.forEach(function (field) {\n                         var _a;\n                         if (field.referencedType !== undefined) {\n                             var fieldType = field.type;\n                             var refType = schemaTypes[field.referencedType];\n                             // map or array of primitive type (-1)\n                             if (!refType) {\n                                 var typeInfo = field.type.split(\":\");\n                                 fieldType = typeInfo[0];\n                                 refType = typeInfo[1];\n                             }\n                             if (fieldType === \"ref\") {\n                                 type(refType, context)(schemaType.prototype, field.name);\n                             }\n                             else {\n                                 type((_a = {}, _a[fieldType] = refType, _a), context)(schemaType.prototype, field.name);\n                             }\n                         }\n                         else {\n                             type(field.type, context)(schemaType.prototype, field.name);\n                         }\n                     });\n                 });\n                 var rootType = schemaTypes[reflection.rootType];\n                 var rootInstance = new rootType();\n                 /**\n                  * auto-initialize referenced types on root type\n                  * to allow registering listeners immediatelly on client-side\n                  */\n                 for (var fieldName in rootType._definition.schema) {\n                     var fieldType = rootType._definition.schema[fieldName];\n                     if (typeof (fieldType) !== \"string\") {\n                         rootInstance[fieldName] = (typeof (fieldType) === \"function\")\n                             ? new fieldType() // is a schema reference\n                             : new (getType(Object.keys(fieldType)[0])).constructor(); // is a \"collection\"\n                     }\n                 }\n                 return rootInstance;\n             };\n             __decorate([\n                 type([ReflectionType], reflectionContext)\n             ], Reflection.prototype, \"types\", void 0);\n             __decorate([\n                 type(\"number\", reflectionContext)\n             ], Reflection.prototype, \"rootType\", void 0);\n             return Reflection;\n         }(Schema));\n\n         registerType(\"map\", { constructor: MapSchema, getProxy: getMapProxy });\n         registerType(\"array\", { constructor: ArraySchema, getProxy: getArrayProxy });\n         registerType(\"set\", { constructor: SetSchema });\n         registerType(\"collection\", { constructor: CollectionSchema, });\n\n         exports.ArraySchema = ArraySchema;\n         exports.CollectionSchema = CollectionSchema;\n         exports.Context = Context;\n         exports.MapSchema = MapSchema;\n         exports.Reflection = Reflection;\n         exports.ReflectionField = ReflectionField;\n         exports.ReflectionType = ReflectionType;\n         exports.Schema = Schema;\n         exports.SchemaDefinition = SchemaDefinition;\n         exports.SetSchema = SetSchema;\n         exports.decode = decode;\n         exports.defineTypes = defineTypes;\n         exports.deprecated = deprecated;\n         exports.dumpChanges = dumpChanges;\n         exports.encode = encode;\n         exports.filter = filter;\n         exports.filterChildren = filterChildren;\n         exports.hasFilter = hasFilter;\n         exports.registerType = registerType;\n         exports.type = type;\n\n         Object.defineProperty(exports, '__esModule', { value: true });\n\n     })));\n     });\n\n     var Room = /** @class */ (function () {\n         function Room(name, rootSchema) {\n             var _this = this;\n             // Public signals\n             this.onStateChange = createSignal();\n             this.onError = createSignal();\n             this.onLeave = createSignal();\n             this.onJoin = createSignal();\n             this.hasJoined = false;\n             this.onMessageHandlers = createNanoEvents();\n             this.id = null;\n             this.name = name;\n             if (rootSchema) {\n                 this.serializer = new (getSerializer(\"schema\"));\n                 this.rootSchema = rootSchema;\n                 this.serializer.state = new rootSchema();\n             }\n             this.onError(function (code, message) { return console.warn(\"colyseus.js - onError => (\" + code + \") \" + message); });\n             this.onLeave(function () { return _this.removeAllListeners(); });\n         }\n         Room.prototype.connect = function (endpoint) {\n             var _this = this;\n             this.connection = new Connection();\n             this.connection.events.onmessage = this.onMessageCallback.bind(this);\n             this.connection.events.onclose = function (e) {\n                 if (!_this.hasJoined) {\n                     console.warn(\"Room connection was closed unexpectedly (\" + e.code + \"): \" + e.reason);\n                     _this.onError.invoke(e.code, e.reason);\n                     return;\n                 }\n                 _this.onLeave.invoke(e.code);\n                 _this.destroy();\n             };\n             this.connection.events.onerror = function (e) {\n                 console.warn(\"Room, onError (\" + e.code + \"): \" + e.reason);\n                 _this.onError.invoke(e.code, e.reason);\n             };\n             this.connection.connect(endpoint);\n         };\n         Room.prototype.leave = function (consented) {\n             if (consented === void 0) { consented = true; }\n             if (this.connection) {\n                 if (consented) {\n                     this.connection.send([exports.Protocol.LEAVE_ROOM]);\n                 }\n                 else {\n                     this.connection.close();\n                 }\n             }\n             else {\n                 this.onLeave.invoke(4000); // \"consented\" code\n             }\n         };\n         Room.prototype.onMessage = function (type, callback) {\n             return this.onMessageHandlers.on(this.getMessageHandlerKey(type), callback);\n         };\n         Room.prototype.send = function (type, message) {\n             var initialBytes = [exports.Protocol.ROOM_DATA];\n             if (typeof (type) === \"string\") {\n                 umd.encode.string(initialBytes, type);\n             }\n             else {\n                 umd.encode.number(initialBytes, type);\n             }\n             var arr;\n             if (message !== undefined) {\n                 var encoded = encode(message);\n                 arr = new Uint8Array(initialBytes.length + encoded.byteLength);\n                 arr.set(new Uint8Array(initialBytes), 0);\n                 arr.set(new Uint8Array(encoded), initialBytes.length);\n             }\n             else {\n                 arr = new Uint8Array(initialBytes);\n             }\n             this.connection.send(arr.buffer);\n         };\n         Object.defineProperty(Room.prototype, \"state\", {\n             get: function () {\n                 return this.serializer.getState();\n             },\n             enumerable: false,\n             configurable: true\n         });\n         Room.prototype.removeAllListeners = function () {\n             this.onJoin.clear();\n             this.onStateChange.clear();\n             this.onError.clear();\n             this.onLeave.clear();\n             this.onMessageHandlers.events = {};\n         };\n         Room.prototype.onMessageCallback = function (event) {\n             var bytes = Array.from(new Uint8Array(event.data));\n             var code = bytes[0];\n             if (code === exports.Protocol.JOIN_ROOM) {\n                 var offset = 1;\n                 this.serializerId = utf8Read(bytes, offset);\n                 offset += utf8Length(this.serializerId);\n                 // Instantiate serializer if not locally available.\n                 if (!this.serializer) {\n                     var serializer = getSerializer(this.serializerId);\n                     this.serializer = new serializer();\n                 }\n                 if (bytes.length > offset && this.serializer.handshake) {\n                     this.serializer.handshake(bytes, { offset: offset });\n                 }\n                 this.hasJoined = true;\n                 this.onJoin.invoke();\n                 // acknowledge successfull JOIN_ROOM\n                 this.connection.send([exports.Protocol.JOIN_ROOM]);\n             }\n             else if (code === exports.Protocol.ERROR) {\n                 var it_1 = { offset: 1 };\n                 var code_1 = umd.decode.number(bytes, it_1);\n                 var message = umd.decode.string(bytes, it_1);\n                 this.onError.invoke(code_1, message);\n             }\n             else if (code === exports.Protocol.LEAVE_ROOM) {\n                 this.leave();\n             }\n             else if (code === exports.Protocol.ROOM_DATA_SCHEMA) {\n                 var it_2 = { offset: 1 };\n                 var context_1 = this.serializer.getState().constructor._context;\n                 var type = context_1.get(umd.decode.number(bytes, it_2));\n                 var message = new type();\n                 message.decode(bytes, it_2);\n                 this.dispatchMessage(type, message);\n             }\n             else if (code === exports.Protocol.ROOM_STATE) {\n                 bytes.shift(); // drop `code` byte\n                 this.setState(bytes);\n             }\n             else if (code === exports.Protocol.ROOM_STATE_PATCH) {\n                 bytes.shift(); // drop `code` byte\n                 this.patch(bytes);\n             }\n             else if (code === exports.Protocol.ROOM_DATA) {\n                 var it_3 = { offset: 1 };\n                 var type = (umd.decode.stringCheck(bytes, it_3))\n                     ? umd.decode.string(bytes, it_3)\n                     : umd.decode.number(bytes, it_3);\n                 var message = (bytes.length > it_3.offset)\n                     ? decode(event.data, it_3.offset)\n                     : undefined;\n                 this.dispatchMessage(type, message);\n             }\n         };\n         Room.prototype.setState = function (encodedState) {\n             this.serializer.setState(encodedState);\n             this.onStateChange.invoke(this.serializer.getState());\n         };\n         Room.prototype.patch = function (binaryPatch) {\n             this.serializer.patch(binaryPatch);\n             this.onStateChange.invoke(this.serializer.getState());\n         };\n         Room.prototype.dispatchMessage = function (type, message) {\n             var messageType = this.getMessageHandlerKey(type);\n             if (this.onMessageHandlers.events[messageType]) {\n                 this.onMessageHandlers.emit(messageType, message);\n             }\n             else if (this.onMessageHandlers.events['*']) {\n                 this.onMessageHandlers.emit('*', type, message);\n             }\n             else {\n                 console.warn(\"onMessage not registered for type '\" + type + \"'.\");\n             }\n         };\n         Room.prototype.destroy = function () {\n             if (this.serializer) {\n                 this.serializer.teardown();\n             }\n         };\n         Room.prototype.getMessageHandlerKey = function (type) {\n             switch (typeof (type)) {\n                 // typeof Schema\n                 case \"function\": return \"$\" + type._typeid;\n                 // string\n                 case \"string\": return type;\n                 // number\n                 case \"number\": return \"i\" + type;\n                 default: throw new Error(\"invalid message type.\");\n             }\n         };\n         return Room;\n     }());\n\n     /// <reference path=\"../typings/cocos-creator.d.ts\" />\n     /**\n      * We do not assign 'storage' to window.localStorage immediatelly for React\n      * Native compatibility. window.localStorage is not present when this module is\n      * loaded.\n      */\n     var storage;\n     function getStorage() {\n         if (!storage) {\n             storage = (typeof (cc) !== 'undefined' && cc.sys && cc.sys.localStorage)\n                 ? cc.sys.localStorage // compatibility with cocos creator\n                 : typeof (window) !== \"undefined\" && window.localStorage //RN does have window object at this point, but localStorage is not defined\n                     ? window.localStorage // regular browser environment\n                     : {\n                         cache: {},\n                         setItem: function (key, value) { this.cache[key] = value; },\n                         getItem: function (key) { this.cache[key]; },\n                         removeItem: function (key) { delete this.cache[key]; },\n                     };\n         }\n         return storage;\n     }\n     function setItem(key, value) {\n         getStorage().setItem(key, value);\n     }\n     function removeItem(key) {\n         getStorage().removeItem(key);\n     }\n     function getItem(key, callback) {\n         var value = getStorage().getItem(key);\n         if (typeof (Promise) === 'undefined' || // old browsers\n             !(value instanceof Promise)) {\n             // browser has synchronous return\n             callback(value);\n         }\n         else {\n             // react-native is asynchronous\n             value.then(function (id) { return callback(id); });\n         }\n     }\n\n     var TOKEN_STORAGE = \"colyseus-auth-token\";\n     exports.Platform = void 0;\n     (function (Platform) {\n         Platform[\"ios\"] = \"ios\";\n         Platform[\"android\"] = \"android\";\n     })(exports.Platform || (exports.Platform = {}));\n     var Auth = /** @class */ (function () {\n         function Auth(endpoint) {\n             var _this = this;\n             this._id = undefined;\n             this.username = undefined;\n             this.displayName = undefined;\n             this.avatarUrl = undefined;\n             this.isAnonymous = undefined;\n             this.email = undefined;\n             this.lang = undefined;\n             this.location = undefined;\n             this.timezone = undefined;\n             this.metadata = undefined;\n             this.devices = undefined;\n             this.facebookId = undefined;\n             this.twitterId = undefined;\n             this.googleId = undefined;\n             this.gameCenterId = undefined;\n             this.steamId = undefined;\n             this.friendIds = undefined;\n             this.blockedUserIds = undefined;\n             this.createdAt = undefined;\n             this.updatedAt = undefined;\n             // auth token\n             this.token = undefined;\n             this.endpoint = endpoint.replace(\"ws\", \"http\");\n             getItem(TOKEN_STORAGE, function (token) { return _this.token = token; });\n         }\n         Object.defineProperty(Auth.prototype, \"hasToken\", {\n             get: function () {\n                 return !!this.token;\n             },\n             enumerable: false,\n             configurable: true\n         });\n         Auth.prototype.login = function (options) {\n             if (options === void 0) { options = {}; }\n             return __awaiter(this, void 0, void 0, function () {\n                 var queryParams, data, attr;\n                 return __generator(this, function (_a) {\n                     switch (_a.label) {\n                         case 0:\n                             queryParams = Object.assign({}, options);\n                             if (this.hasToken) {\n                                 queryParams.token = this.token;\n                             }\n                             return [4 /*yield*/, this.request('post', '/auth', queryParams)];\n                         case 1:\n                             data = _a.sent();\n                             // set & cache token\n                             this.token = data.token;\n                             setItem(TOKEN_STORAGE, this.token);\n                             for (attr in data) {\n                                 if (this.hasOwnProperty(attr)) {\n                                     this[attr] = data[attr];\n                                 }\n                             }\n                             this.registerPingService();\n                             return [2 /*return*/, this];\n                     }\n                 });\n             });\n         };\n         Auth.prototype.save = function () {\n             return __awaiter(this, void 0, void 0, function () {\n                 return __generator(this, function (_a) {\n                     switch (_a.label) {\n                         case 0: return [4 /*yield*/, this.request('put', '/auth', {}, {\n                                 username: this.username,\n                                 displayName: this.displayName,\n                                 avatarUrl: this.avatarUrl,\n                                 lang: this.lang,\n                                 location: this.location,\n                                 timezone: this.timezone,\n                             })];\n                         case 1:\n                             _a.sent();\n                             return [2 /*return*/, this];\n                     }\n                 });\n             });\n         };\n         Auth.prototype.getFriends = function () {\n             return __awaiter(this, void 0, void 0, function () {\n                 return __generator(this, function (_a) {\n                     switch (_a.label) {\n                         case 0: return [4 /*yield*/, this.request('get', '/friends/all')];\n                         case 1: return [2 /*return*/, (_a.sent())];\n                     }\n                 });\n             });\n         };\n         Auth.prototype.getOnlineFriends = function () {\n             return __awaiter(this, void 0, void 0, function () {\n                 return __generator(this, function (_a) {\n                     switch (_a.label) {\n                         case 0: return [4 /*yield*/, this.request('get', '/friends/online')];\n                         case 1: return [2 /*return*/, (_a.sent())];\n                     }\n                 });\n             });\n         };\n         Auth.prototype.getFriendRequests = function () {\n             return __awaiter(this, void 0, void 0, function () {\n                 return __generator(this, function (_a) {\n                     switch (_a.label) {\n                         case 0: return [4 /*yield*/, this.request('get', '/friends/requests')];\n                         case 1: return [2 /*return*/, (_a.sent())];\n                     }\n                 });\n             });\n         };\n         Auth.prototype.sendFriendRequest = function (friendId) {\n             return __awaiter(this, void 0, void 0, function () {\n                 return __generator(this, function (_a) {\n                     switch (_a.label) {\n                         case 0: return [4 /*yield*/, this.request('post', '/friends/requests', { userId: friendId })];\n                         case 1: return [2 /*return*/, (_a.sent())];\n                     }\n                 });\n             });\n         };\n         Auth.prototype.acceptFriendRequest = function (friendId) {\n             return __awaiter(this, void 0, void 0, function () {\n                 return __generator(this, function (_a) {\n                     switch (_a.label) {\n                         case 0: return [4 /*yield*/, this.request('put', '/friends/requests', { userId: friendId })];\n                         case 1: return [2 /*return*/, (_a.sent())];\n                     }\n                 });\n             });\n         };\n         Auth.prototype.declineFriendRequest = function (friendId) {\n             return __awaiter(this, void 0, void 0, function () {\n                 return __generator(this, function (_a) {\n                     switch (_a.label) {\n                         case 0: return [4 /*yield*/, this.request('del', '/friends/requests', { userId: friendId })];\n                         case 1: return [2 /*return*/, (_a.sent())];\n                     }\n                 });\n             });\n         };\n         Auth.prototype.blockUser = function (friendId) {\n             return __awaiter(this, void 0, void 0, function () {\n                 return __generator(this, function (_a) {\n                     switch (_a.label) {\n                         case 0: return [4 /*yield*/, this.request('post', '/friends/block', { userId: friendId })];\n                         case 1: return [2 /*return*/, (_a.sent())];\n                     }\n                 });\n             });\n         };\n         Auth.prototype.unblockUser = function (friendId) {\n             return __awaiter(this, void 0, void 0, function () {\n                 return __generator(this, function (_a) {\n                     switch (_a.label) {\n                         case 0: return [4 /*yield*/, this.request('put', '/friends/block', { userId: friendId })];\n                         case 1: return [2 /*return*/, (_a.sent())];\n                     }\n                 });\n             });\n         };\n         Auth.prototype.request = function (method, segments, query, body, headers) {\n             if (query === void 0) { query = {}; }\n             if (headers === void 0) { headers = {}; }\n             return __awaiter(this, void 0, void 0, function () {\n                 var queryParams, name_1, queryString, opts;\n                 return __generator(this, function (_a) {\n                     switch (_a.label) {\n                         case 0:\n                             headers['Accept'] = 'application/json';\n                             if (this.hasToken) {\n                                 headers['Authorization'] = 'Bearer ' + this.token;\n                             }\n                             queryParams = [];\n                             for (name_1 in query) {\n                                 queryParams.push(name_1 + \"=\" + query[name_1]);\n                             }\n                             queryString = (queryParams.length > 0)\n                                 ? \"?\" + queryParams.join(\"&\")\n                                 : '';\n                             opts = { headers: headers };\n                             if (body) {\n                                 opts.body = body;\n                             }\n                             return [4 /*yield*/, http[method](\"\" + this.endpoint + segments + queryString, opts)];\n                         case 1: return [2 /*return*/, (_a.sent()).data];\n                     }\n                 });\n             });\n         };\n         Auth.prototype.logout = function () {\n             this.token = undefined;\n             removeItem(TOKEN_STORAGE);\n             this.unregisterPingService();\n         };\n         Auth.prototype.registerPingService = function (timeout) {\n             var _this = this;\n             if (timeout === void 0) { timeout = 15000; }\n             this.unregisterPingService();\n             this.keepOnlineInterval = setInterval(function () { return _this.request('get', '/auth'); }, timeout);\n         };\n         Auth.prototype.unregisterPingService = function () {\n             clearInterval(this.keepOnlineInterval);\n         };\n         return Auth;\n     }());\n\n     var _a;\n     var MatchMakeError = /** @class */ (function (_super) {\n         __extends(MatchMakeError, _super);\n         function MatchMakeError(message, code) {\n             var _this = _super.call(this, message) || this;\n             _this.code = code;\n             Object.setPrototypeOf(_this, MatchMakeError.prototype);\n             return _this;\n         }\n         return MatchMakeError;\n     }(Error));\n     // - React Native does not provide `window.location`\n     // - Cocos Creator (Native) does not provide `window.location.hostname` \n     var DEFAULT_ENDPOINT = (typeof (window) !== \"undefined\" && typeof ((_a = window === null || window === void 0 ? void 0 : window.location) === null || _a === void 0 ? void 0 : _a.hostname) !== \"undefined\")\n         ? window.location.protocol.replace(\"http\", \"ws\") + \"//\" + window.location.hostname + (window.location.port && \":\" + window.location.port)\n         : \"ws://127.0.0.1:2567\";\n     var Client = /** @class */ (function () {\n         function Client(endpoint) {\n             if (endpoint === void 0) { endpoint = DEFAULT_ENDPOINT; }\n             this.endpoint = endpoint;\n         }\n         Object.defineProperty(Client.prototype, \"auth\", {\n             get: function () {\n                 if (!this._auth) {\n                     this._auth = new Auth(this.endpoint);\n                 }\n                 return this._auth;\n             },\n             enumerable: false,\n             configurable: true\n         });\n         Client.prototype.joinOrCreate = function (roomName, options, rootSchema) {\n             if (options === void 0) { options = {}; }\n             return __awaiter(this, void 0, void 0, function () {\n                 return __generator(this, function (_a) {\n                     switch (_a.label) {\n                         case 0: return [4 /*yield*/, this.createMatchMakeRequest('joinOrCreate', roomName, options, rootSchema)];\n                         case 1: return [2 /*return*/, _a.sent()];\n                     }\n                 });\n             });\n         };\n         Client.prototype.create = function (roomName, options, rootSchema) {\n             if (options === void 0) { options = {}; }\n             return __awaiter(this, void 0, void 0, function () {\n                 return __generator(this, function (_a) {\n                     switch (_a.label) {\n                         case 0: return [4 /*yield*/, this.createMatchMakeRequest('create', roomName, options, rootSchema)];\n                         case 1: return [2 /*return*/, _a.sent()];\n                     }\n                 });\n             });\n         };\n         Client.prototype.join = function (roomName, options, rootSchema) {\n             if (options === void 0) { options = {}; }\n             return __awaiter(this, void 0, void 0, function () {\n                 return __generator(this, function (_a) {\n                     switch (_a.label) {\n                         case 0: return [4 /*yield*/, this.createMatchMakeRequest('join', roomName, options, rootSchema)];\n                         case 1: return [2 /*return*/, _a.sent()];\n                     }\n                 });\n             });\n         };\n         Client.prototype.joinById = function (roomId, options, rootSchema) {\n             if (options === void 0) { options = {}; }\n             return __awaiter(this, void 0, void 0, function () {\n                 return __generator(this, function (_a) {\n                     switch (_a.label) {\n                         case 0: return [4 /*yield*/, this.createMatchMakeRequest('joinById', roomId, options, rootSchema)];\n                         case 1: return [2 /*return*/, _a.sent()];\n                     }\n                 });\n             });\n         };\n         Client.prototype.reconnect = function (roomId, sessionId, rootSchema) {\n             return __awaiter(this, void 0, void 0, function () {\n                 return __generator(this, function (_a) {\n                     switch (_a.label) {\n                         case 0: return [4 /*yield*/, this.createMatchMakeRequest('joinById', roomId, { sessionId: sessionId }, rootSchema)];\n                         case 1: return [2 /*return*/, _a.sent()];\n                     }\n                 });\n             });\n         };\n         Client.prototype.getAvailableRooms = function (roomName) {\n             if (roomName === void 0) { roomName = \"\"; }\n             return __awaiter(this, void 0, void 0, function () {\n                 var url;\n                 return __generator(this, function (_a) {\n                     switch (_a.label) {\n                         case 0:\n                             url = this.endpoint.replace(\"ws\", \"http\") + \"/matchmake/\" + roomName;\n                             return [4 /*yield*/, get_1(url, { headers: { 'Accept': 'application/json' } })];\n                         case 1: return [2 /*return*/, (_a.sent()).data];\n                     }\n                 });\n             });\n         };\n         Client.prototype.consumeSeatReservation = function (response, rootSchema) {\n             return __awaiter(this, void 0, void 0, function () {\n                 var room;\n                 return __generator(this, function (_a) {\n                     room = this.createRoom(response.room.name, rootSchema);\n                     room.id = response.room.roomId;\n                     room.sessionId = response.sessionId;\n                     room.connect(this.buildEndpoint(response.room, { sessionId: room.sessionId }));\n                     return [2 /*return*/, new Promise(function (resolve, reject) {\n                             var onError = function (code, message) { return reject(new ServerError(code, message)); };\n                             room.onError.once(onError);\n                             room['onJoin'].once(function () {\n                                 room.onError.remove(onError);\n                                 resolve(room);\n                             });\n                         })];\n                 });\n             });\n         };\n         Client.prototype.createMatchMakeRequest = function (method, roomName, options, rootSchema) {\n             if (options === void 0) { options = {}; }\n             return __awaiter(this, void 0, void 0, function () {\n                 var url, response;\n                 return __generator(this, function (_a) {\n                     switch (_a.label) {\n                         case 0:\n                             url = this.endpoint.replace(\"ws\", \"http\") + \"/matchmake/\" + method + \"/\" + roomName;\n                             // automatically forward auth token, if present\n                             if (this._auth && this._auth.hasToken) {\n                                 options.token = this._auth.token;\n                             }\n                             return [4 /*yield*/, post_1(url, {\n                                     headers: {\n                                         'Accept': 'application/json',\n                                         'Content-Type': 'application/json'\n                                     },\n                                     body: JSON.stringify(options)\n                                 })];\n                         case 1:\n                             response = (_a.sent()).data;\n                             if (response.error) {\n                                 throw new MatchMakeError(response.error, response.code);\n                             }\n                             return [2 /*return*/, this.consumeSeatReservation(response, rootSchema)];\n                     }\n                 });\n             });\n         };\n         Client.prototype.createRoom = function (roomName, rootSchema) {\n             return new Room(roomName, rootSchema);\n         };\n         Client.prototype.buildEndpoint = function (room, options) {\n             if (options === void 0) { options = {}; }\n             var params = [];\n             for (var name_1 in options) {\n                 if (!options.hasOwnProperty(name_1)) {\n                     continue;\n                 }\n                 params.push(name_1 + \"=\" + options[name_1]);\n             }\n             return this.endpoint + \"/\" + room.processId + \"/\" + room.roomId + \"?\" + params.join('&');\n         };\n         return Client;\n     }());\n\n     var SchemaSerializer = /** @class */ (function () {\n         function SchemaSerializer() {\n         }\n         SchemaSerializer.prototype.setState = function (rawState) {\n             this.state.decode(rawState);\n         };\n         SchemaSerializer.prototype.getState = function () {\n             return this.state;\n         };\n         SchemaSerializer.prototype.patch = function (patches) {\n             this.state.decode(patches);\n         };\n         SchemaSerializer.prototype.teardown = function () {\n             var _a, _b;\n             (_b = (_a = this.state) === null || _a === void 0 ? void 0 : _a['$changes']) === null || _b === void 0 ? void 0 : _b.root.clearRefs();\n         };\n         SchemaSerializer.prototype.handshake = function (bytes, it) {\n             if (this.state) {\n                 // validate client/server definitinos\n                 var reflection = new umd.Reflection();\n                 reflection.decode(bytes, it);\n             }\n             else {\n                 // initialize reflected state from server\n                 this.state = umd.Reflection.decode(bytes, it);\n             }\n         };\n         return SchemaSerializer;\n     }());\n\n     var NoneSerializer = /** @class */ (function () {\n         function NoneSerializer() {\n         }\n         NoneSerializer.prototype.setState = function (rawState) { };\n         NoneSerializer.prototype.getState = function () { return null; };\n         NoneSerializer.prototype.patch = function (patches) { };\n         NoneSerializer.prototype.teardown = function () { };\n         NoneSerializer.prototype.handshake = function (bytes) { };\n         return NoneSerializer;\n     }());\n\n     registerSerializer('schema', SchemaSerializer);\n     registerSerializer('none', NoneSerializer);\n\n     exports.Auth = Auth;\n     exports.Client = Client;\n     exports.Room = Room;\n     exports.SchemaSerializer = SchemaSerializer;\n     exports.registerSerializer = registerSerializer;\n\n     Object.defineProperty(exports, '__esModule', { value: true });\n\n })));\n //# sourceMappingURL=colyseus.js.map\n\n\n// #endregion ORIGINAL CODE\n\n_cjsExports = module.exports;\n_Protocol = module.exports.Protocol;\n_ErrorCode = module.exports.ErrorCode;\n_OPERATION = module.exports.OPERATION;\n_ArraySchema = module.exports.ArraySchema;\n_CollectionSchema = module.exports.CollectionSchema;\n_Context = module.exports.Context;\n_MapSchema = module.exports.MapSchema;\n_Reflection = module.exports.Reflection;\n_ReflectionField = module.exports.ReflectionField;\n_ReflectionType = module.exports.ReflectionType;\n_Schema = module.exports.Schema;\n_SchemaDefinition = module.exports.SchemaDefinition;\n_SetSchema = module.exports.SetSchema;\n_decode = module.exports.decode;\n_defineTypes = module.exports.defineTypes;\n_deprecated = module.exports.deprecated;\n_dumpChanges = module.exports.dumpChanges;\n_encode0 = module.exports.encode;\n_filter = module.exports.filter;\n_filterChildren = module.exports.filterChildren;\n_hasFilter = module.exports.hasFilter;\n_registerType = module.exports.registerType;\n_type = module.exports.type;\n___esModule = module.exports.__esModule;\n_Platform = module.exports.Platform;\n_Auth = module.exports.Auth;\n_Client = module.exports.Client;\n_Room = module.exports.Room;\n_SchemaSerializer = module.exports.SchemaSerializer;\n_registerSerializer = module.exports.registerSerializer;\n\n}, {});\nexport { _cjsExports as default };\nexport { __cjsMetaURL }\n"]}