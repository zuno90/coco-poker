{"version":3,"sources":["file:///Users/zuno/Desktop/ZUNO/coco-poker/assets/scripts/ColyseusNetwork.ts"],"names":["_decorator","Component","Colyseus","ccclass","property","ColyseusNetwork","start","endpoint","useSSL","hostname","port","client","Client","connect","room","joinOrCreate","jwt","console","log","sessionId","onStateChange","state","onLeave","code","err","error"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;;AACdC,MAAAA,Q;;;;;;;;;OAED;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBJ,U;;iCAGjBK,e,WADZF,OAAO,CAAC,iBAAD,C,2BAAR,MACaE,eADb,SACqCJ,SADrC,CAC+C;AAAA;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAQtCK,QAAAA,KAAK,GAAG;AACb;AACA;AACA,gBAAMC,QAAQ,GAAI,GAAE,KAAKC,MAAL,GAAc,KAAd,GAAsB,IAAK,MAAK,KAAKC,QAAS,GAChE,KAAKD,MAAL,GAAc,EAAd,GAAmB,KAAKE,IACzB,EAFD;AAGA,eAAKC,MAAL,GAAc,IAAI;AAAA;AAAA,oCAASC,MAAb,CAAoBL,QAApB,CAAd,CANa,CAQb;AACA;AACD;;AAEmB,cAAPM,OAAO,GAAG;AACrB,cAAI;AACF,iBAAKC,IAAL,GAAY,MAAM,KAAKH,MAAL,CAAYI,YAAZ,CAAyB,MAAzB,EAAiC;AAAEC,cAAAA,GAAG,EAAE;AAAP,aAAjC,CAAlB;AAEAC,YAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ;AACAD,YAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ,EAAiC,KAAKJ,IAAL,CAAUK,SAA3C;AAEA,iBAAKL,IAAL,CAAUM,aAAV,CAAyBC,KAAD,IAAW;AACjCJ,cAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+BG,KAA/B;AACD,aAFD;AAIA,iBAAKP,IAAL,CAAUQ,OAAV,CAAmBC,IAAD,IAAU;AAC1BN,cAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBK,IAAxB;AACD,aAFD;AAGD,WAbD,CAaE,OAAOC,GAAP,EAAY;AACZP,YAAAA,OAAO,CAACQ,KAAR,CAAcD,GAAd;AACD;AACF;;AArC4C,O,2EAC5CpB,Q;;;;;iBAAmC,E;;+EACnCA,Q;;;;;iBAA+B,I;;iFAC/BA,Q;;;;;iBAAyB,K","sourcesContent":["import { _decorator, Component } from \"cc\";\nimport Colyseus from \"db://colyseus-sdk/colyseus.js\";\n\nconst { ccclass, property } = _decorator;\n\n@ccclass(\"ColyseusNetwork\")\nexport class ColyseusNetwork extends Component {\n  @property public hostname: string = \"\";\n  @property public port: number = null;\n  @property public useSSL = false;\n\n  client!: Colyseus.Client;\n  room!: Colyseus.Room;\n\n  public start() {\n    // Instantiate Colyseus Client\n    // connects into (ws|wss)://hostname[:port]\n    const endpoint = `${this.useSSL ? \"wss\" : \"ws\"}://${this.hostname}${\n      this.useSSL ? \"\" : this.port\n    }`;\n    this.client = new Colyseus.Client(endpoint);\n\n    // Connect into the room\n    // this.connect();\n  }\n\n  public async connect() {\n    try {\n      this.room = await this.client.joinOrCreate(\"noob\", { jwt: \"\" });\n\n      console.log(\"joined successfully!\");\n      console.log(\"user's sessionId:\", this.room.sessionId);\n\n      this.room.onStateChange((state) => {\n        console.log(\"onStateChange: \", state);\n      });\n\n      this.room.onLeave((code) => {\n        console.log(\"onLeave:\", code);\n      });\n    } catch (err) {\n      console.error(err);\n    }\n  }\n}\n"]}